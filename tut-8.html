<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>2.9&nbsp;Onward and Further</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="minted-solarizedlight-style.css" title="default"/><link rel="stylesheet" type="text/css" href="minted.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Reach:<span class="mywbr"> &nbsp;</span> The Safest and Easiest DApp Programming Language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="tut.html" class="tocviewselflink" data-pltdoc="x">Tutorial</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="guide.html" class="tocviewlink" data-pltdoc="x">Guide</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="workshop.html" class="tocviewlink" data-pltdoc="x">Workshop</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="ref.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>2&nbsp;</td><td><a href="tut.html" class="tocviewlink" data-pltdoc="x">Tutorial</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="tut-0.html" class="tocviewlink" data-pltdoc="x">Install and Initialize</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="tut-1.html" class="tocviewlink" data-pltdoc="x">Scaffolding and Setup</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="tut-2.html" class="tocviewlink" data-pltdoc="x">Rock, Paper, and Scissors</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="tut-3.html" class="tocviewlink" data-pltdoc="x">Bets and Wagers</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="tut-4.html" class="tocviewlink" data-pltdoc="x">Trust and Commitments</a></td></tr><tr><td align="right">2.6&nbsp;</td><td><a href="tut-5.html" class="tocviewlink" data-pltdoc="x">Timeouts and Participation</a></td></tr><tr><td align="right">2.7&nbsp;</td><td><a href="tut-6.html" class="tocviewlink" data-pltdoc="x">Play and Play Again</a></td></tr><tr><td align="right">2.8&nbsp;</td><td><a href="tut-7.html" class="tocviewlink" data-pltdoc="x">Interaction and Independence</a></td></tr><tr><td align="right">2.9&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Onward and Further</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="tut-7.html" title="backward to &quot;2.8 Interaction and Independence&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="tut.html" title="up to &quot;2 Tutorial&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="guide.html" title="forward to &quot;3 Guide&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>2.9<tt>&nbsp;</tt><a name="(part._tut-8)"></a>Onward and Further</h4><p>Let&rsquo;s review what we&rsquo;ve done through this tutorial:</p><ul><li><p>In <a href="tut-0.html" data-pltdoc="x">part zero</a>, we saw how Reach can be installed with one command on almost any system without any dependencies beyond what most developers have anyways.</p></li><li><p>In <a href="tut-1.html" data-pltdoc="x">part one</a>, we saw how Reach programs have a succinct setup that easily abstracts the details of your chosen <a href="ref-model.html#%28tech._consensus._network%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus network</span></a> into a couple lines and three key API calls.</p></li><li><p>In <a href="tut-2.html" data-pltdoc="x">part two</a>, we saw how Reach allows developers to focus on the business logic of their decentralized application and look past the nitty-gritty details of blockchain interaction and protocol design.</p></li><li><p>In <a href="tut-3.html" data-pltdoc="x">part three</a>, we saw that it is just as easy for Reach to deal with tokens and network transactions as it is to deal with data sharing.</p></li><li><p>In <a href="tut-4.html" data-pltdoc="x">part four</a>, we were introduce to the Reach <a href="guide-assert.html" data-pltdoc="x">automatic formal verification</a> engine and its ability to ensure our program doesn&rsquo;t have entire categories of flaws and security vulnerabilities.</p></li><li><p>In <a href="tut-5.html" data-pltdoc="x">part five</a>, we saw how Reach allows you to specify how to deal with <a href="guide-timeout.html" data-pltdoc="x">non-participation</a> and protect against funds being locked in contracts.</p></li><li><p>In <a href="tut-6.html" data-pltdoc="x">part six</a>, we saw how Reach can express arbitrary length interactions and how flexible the Reach <a href="ref-model.html#%28tech._frontend%29" class="techoutside" data-pltdoc="x"><span class="techinside">frontends</span></a> are to variations in the <a href="ref-model.html#%28tech._backend%29" class="techoutside" data-pltdoc="x"><span class="techinside">backend</span></a>.</p></li><li><p>In <a href="tut-7.html" data-pltdoc="x">part seven</a>, we saw how to decouple your Reach program from the Reach standard testing environment and launch an interactive version on a real network.</p></li></ul><p>Despite having done so much, this is really just a brief introduction to what is possible with Reach.</p><p>How difficult was all this?
Let&rsquo;s look at the final versions of our programs.</p><p>First, let&rsquo;s look at the Reach program:</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-7/index.rsh"><span class="stt">tut-7/index.rsh</span></a></p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span> <span class="mi">1</span>    <span class="s1">&#39;reach 0.1&#39;</span><span class="p">;</span>
 <span class="mi">2</span>    
 <span class="mi">3</span>    <span class="kd">const</span> <span class="p">[</span> <span class="nx">isHand</span><span class="p">,</span> <span class="nx">ROCK</span><span class="p">,</span> <span class="nx">PAPER</span><span class="p">,</span> <span class="nx">SCISSORS</span> <span class="p">]</span> <span class="o">=</span> <span class="nb">makeEnum</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
 <span class="mi">4</span>    <span class="kd">const</span> <span class="p">[</span> <span class="nx">isOutcome</span><span class="p">,</span> <span class="nx">B_WINS</span><span class="p">,</span> <span class="nx">DRAW</span><span class="p">,</span> <span class="nx">A_WINS</span> <span class="p">]</span> <span class="o">=</span> <span class="nb">makeEnum</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
 <span class="mi">5</span>    
 <span class="mi">6</span>    <span class="kd">const</span> <span class="nx">winner</span> <span class="o">=</span> <span class="p">(</span><span class="nx">handA</span><span class="p">,</span> <span class="nx">handB</span><span class="p">)</span> <span class="p">=&gt;</span>
 <span class="mi">7</span>          <span class="p">((</span><span class="nx">handA</span> <span class="o">+</span> <span class="p">(</span><span class="mi">4</span> <span class="o">-</span> <span class="nx">handB</span><span class="p">))</span> <span class="o">%</span> <span class="mi">3</span><span class="p">);</span>
 <span class="mi">8</span>    
 <span class="mi">9</span>    <span class="k">assert</span><span class="p">(</span><span class="nx">winner</span><span class="p">(</span><span class="nx">ROCK</span><span class="p">,</span> <span class="nx">PAPER</span><span class="p">)</span> <span class="o">==</span> <span class="nx">B_WINS</span><span class="p">);</span>
<span class="mi">10</span>    <span class="k">assert</span><span class="p">(</span><span class="nx">winner</span><span class="p">(</span><span class="nx">PAPER</span><span class="p">,</span> <span class="nx">ROCK</span><span class="p">)</span> <span class="o">==</span> <span class="nx">A_WINS</span><span class="p">);</span>
<span class="mi">11</span>    <span class="k">assert</span><span class="p">(</span><span class="nx">winner</span><span class="p">(</span><span class="nx">ROCK</span><span class="p">,</span> <span class="nx">ROCK</span><span class="p">)</span> <span class="o">==</span> <span class="nx">DRAW</span><span class="p">);</span>
<span class="mi">12</span>    
<span class="mi">13</span>    <span class="k">forall</span><span class="p">(</span><span class="nb">UInt256</span><span class="p">,</span> <span class="nx">handA</span> <span class="p">=&gt;</span>
<span class="mi">14</span>      <span class="k">forall</span><span class="p">(</span><span class="nb">UInt256</span><span class="p">,</span> <span class="nx">handB</span> <span class="p">=&gt;</span>
<span class="mi">15</span>        <span class="k">assert</span><span class="p">(</span><span class="nx">isOutcome</span><span class="p">(</span><span class="nx">winner</span><span class="p">(</span><span class="nx">handA</span><span class="p">,</span> <span class="nx">handB</span><span class="p">)))));</span>
<span class="mi">16</span>    
<span class="mi">17</span>    <span class="k">forall</span><span class="p">(</span><span class="nb">UInt256</span><span class="p">,</span> <span class="p">(</span><span class="nx">hand</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="mi">18</span>      <span class="k">assert</span><span class="p">(</span><span class="nx">winner</span><span class="p">(</span><span class="nx">hand</span><span class="p">,</span> <span class="nx">hand</span><span class="p">)</span> <span class="o">==</span> <span class="nx">DRAW</span><span class="p">));</span>
<span class="mi">19</span>    
<span class="mi">20</span>    <span class="kd">const</span> <span class="nx">Player</span> <span class="o">=</span>
<span class="mi">21</span>          <span class="p">{</span> <span class="p">...</span><span class="nb">hasRandom</span><span class="p">,</span>
<span class="mi">22</span>            <span class="nx">getHand</span><span class="o">:</span> <span class="nb">Fun</span><span class="p">([],</span> <span class="nb">UInt256</span><span class="p">),</span>
<span class="mi">23</span>            <span class="nx">seeOutcome</span><span class="o">:</span> <span class="nb">Fun</span><span class="p">([</span><span class="nb">UInt256</span><span class="p">],</span> <span class="nb">Null</span><span class="p">),</span>
<span class="mi">24</span>            <span class="nx">informTimeout</span><span class="o">:</span> <span class="nb">Fun</span><span class="p">([],</span> <span class="nb">Null</span><span class="p">)</span> <span class="p">};</span>
<span class="mi">25</span>    <span class="kd">const</span> <span class="nx">Alice</span> <span class="o">=</span>
<span class="mi">26</span>          <span class="p">{</span> <span class="p">...</span><span class="nx">Player</span><span class="p">,</span>
<span class="mi">27</span>            <span class="nx">wager</span><span class="o">:</span> <span class="nb">UInt256</span> <span class="p">};</span>
<span class="mi">28</span>    <span class="kd">const</span> <span class="nx">Bob</span> <span class="o">=</span>
<span class="mi">29</span>          <span class="p">{</span> <span class="p">...</span><span class="nx">Player</span><span class="p">,</span>
<span class="mi">30</span>            <span class="nx">acceptWager</span><span class="o">:</span> <span class="nb">Fun</span><span class="p">([</span><span class="nb">UInt256</span><span class="p">],</span> <span class="nb">Null</span><span class="p">)</span> <span class="p">};</span>
<span class="mi">31</span>    
<span class="mi">32</span>    <span class="kd">const</span> <span class="nx">DEADLINE</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="mi">33</span>    <span class="kd">export</span> <span class="kd">const</span> <span class="nx">main</span> <span class="o">=</span>
<span class="mi">34</span>      <span class="nb">Reach</span><span class="p">.</span><span class="nb">App</span><span class="p">(</span>
<span class="mi">35</span>        <span class="p">{},</span>
<span class="mi">36</span>        <span class="p">[[</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="nx">Alice</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="nx">Bob</span><span class="p">]],</span>
<span class="mi">37</span>        <span class="p">(</span><span class="nx">A</span><span class="p">,</span> <span class="nx">B</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">38</span>          <span class="kd">const</span> <span class="nx">informTimeout</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">39</span>            <span class="nx">each</span><span class="p">([</span><span class="nx">A</span><span class="p">,</span> <span class="nx">B</span><span class="p">],</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">40</span>              <span class="k">interact</span><span class="p">.</span><span class="nx">informTimeout</span><span class="p">();</span> <span class="p">});</span> <span class="p">};</span>
<span class="mi">41</span>    
<span class="mi">42</span>          <span class="nx">A</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">43</span>            <span class="kd">const</span> <span class="nx">wager</span> <span class="o">=</span> <span class="k">declassify</span><span class="p">(</span><span class="k">interact</span><span class="p">.</span><span class="nx">wager</span><span class="p">);</span> <span class="p">});</span>
<span class="mi">44</span>          <span class="nx">A</span><span class="p">.</span><span class="k">publish</span><span class="p">(</span><span class="nx">wager</span><span class="p">)</span>
<span class="mi">45</span>            <span class="p">.</span><span class="k">pay</span><span class="p">(</span><span class="nx">wager</span><span class="p">);</span>
<span class="mi">46</span>          <span class="k">commit</span><span class="p">();</span>
<span class="mi">47</span>    
<span class="mi">48</span>          <span class="nx">B</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">49</span>            <span class="k">interact</span><span class="p">.</span><span class="nx">acceptWager</span><span class="p">(</span><span class="nx">wager</span><span class="p">);</span> <span class="p">});</span>
<span class="mi">50</span>          <span class="nx">B</span><span class="p">.</span><span class="k">pay</span><span class="p">(</span><span class="nx">wager</span><span class="p">)</span>
<span class="mi">51</span>            <span class="p">.</span><span class="k">timeout</span><span class="p">(</span><span class="nx">DEADLINE</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nb">closeTo</span><span class="p">(</span><span class="nx">A</span><span class="p">,</span> <span class="nx">informTimeout</span><span class="p">));</span>
<span class="mi">52</span>    
<span class="mi">53</span>          <span class="kd">var</span> <span class="nx">outcome</span> <span class="o">=</span> <span class="nx">DRAW</span><span class="p">;</span>
<span class="mi">54</span>          <span class="k">invariant</span><span class="p">(</span><span class="nb">balance</span><span class="p">()</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">wager</span> <span class="o">&amp;&amp;</span> <span class="nx">isOutcome</span><span class="p">(</span><span class="nx">outcome</span><span class="p">)</span> <span class="p">);</span>
<span class="mi">55</span>          <span class="k">while</span> <span class="p">(</span> <span class="nx">outcome</span> <span class="o">==</span> <span class="nx">DRAW</span> <span class="p">)</span> <span class="p">{</span>
<span class="mi">56</span>            <span class="k">commit</span><span class="p">();</span>
<span class="mi">57</span>    
<span class="mi">58</span>            <span class="nx">A</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">59</span>              <span class="kd">const</span> <span class="nx">_handA</span> <span class="o">=</span> <span class="k">interact</span><span class="p">.</span><span class="nx">getHand</span><span class="p">();</span>
<span class="mi">60</span>              <span class="kd">const</span> <span class="p">[</span><span class="nx">_commitA</span><span class="p">,</span> <span class="nx">_saltA</span><span class="p">]</span> <span class="o">=</span> <span class="nb">makeCommitment</span><span class="p">(</span><span class="k">interact</span><span class="p">,</span> <span class="nx">_handA</span><span class="p">);</span>
<span class="mi">61</span>              <span class="kd">const</span> <span class="nx">commitA</span> <span class="o">=</span> <span class="k">declassify</span><span class="p">(</span><span class="nx">_commitA</span><span class="p">);</span> <span class="p">});</span>
<span class="mi">62</span>            <span class="nx">A</span><span class="p">.</span><span class="k">publish</span><span class="p">(</span><span class="nx">commitA</span><span class="p">)</span>
<span class="mi">63</span>              <span class="p">.</span><span class="k">timeout</span><span class="p">(</span><span class="nx">DEADLINE</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nb">closeTo</span><span class="p">(</span><span class="nx">B</span><span class="p">,</span> <span class="nx">informTimeout</span><span class="p">));</span>
<span class="mi">64</span>            <span class="k">commit</span><span class="p">();</span>
<span class="mi">65</span>    
<span class="mi">66</span>            <span class="k">unknowable</span><span class="p">(</span><span class="nx">B</span><span class="p">,</span> <span class="nx">A</span><span class="p">(</span><span class="nx">_handA</span><span class="p">,</span> <span class="nx">_saltA</span><span class="p">));</span>
<span class="mi">67</span>            <span class="nx">B</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">68</span>              <span class="kd">const</span> <span class="nx">handB</span> <span class="o">=</span> <span class="k">declassify</span><span class="p">(</span><span class="k">interact</span><span class="p">.</span><span class="nx">getHand</span><span class="p">());</span> <span class="p">});</span>
<span class="mi">69</span>            <span class="nx">B</span><span class="p">.</span><span class="k">publish</span><span class="p">(</span><span class="nx">handB</span><span class="p">)</span>
<span class="mi">70</span>              <span class="p">.</span><span class="k">timeout</span><span class="p">(</span><span class="nx">DEADLINE</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nb">closeTo</span><span class="p">(</span><span class="nx">A</span><span class="p">,</span> <span class="nx">informTimeout</span><span class="p">));</span>
<span class="mi">71</span>            <span class="k">commit</span><span class="p">();</span>
<span class="mi">72</span>    
<span class="mi">73</span>            <span class="nx">A</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">74</span>              <span class="kd">const</span> <span class="p">[</span><span class="nx">saltA</span><span class="p">,</span> <span class="nx">handA</span><span class="p">]</span> <span class="o">=</span> <span class="k">declassify</span><span class="p">([</span><span class="nx">_saltA</span><span class="p">,</span> <span class="nx">_handA</span><span class="p">]);</span> <span class="p">});</span>
<span class="mi">75</span>            <span class="nx">A</span><span class="p">.</span><span class="k">publish</span><span class="p">(</span><span class="nx">saltA</span><span class="p">,</span> <span class="nx">handA</span><span class="p">)</span>
<span class="mi">76</span>              <span class="p">.</span><span class="k">timeout</span><span class="p">(</span><span class="nx">DEADLINE</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nb">closeTo</span><span class="p">(</span><span class="nx">B</span><span class="p">,</span> <span class="nx">informTimeout</span><span class="p">));</span>
<span class="mi">77</span>            <span class="nb">checkCommitment</span><span class="p">(</span><span class="nx">commitA</span><span class="p">,</span> <span class="nx">saltA</span><span class="p">,</span> <span class="nx">handA</span><span class="p">);</span>
<span class="mi">78</span>    
<span class="mi">79</span>            <span class="nx">outcome</span> <span class="o">=</span> <span class="nx">winner</span><span class="p">(</span><span class="nx">handA</span><span class="p">,</span> <span class="nx">handB</span><span class="p">);</span>
<span class="mi">80</span>            <span class="k">continue</span><span class="p">;</span> <span class="p">}</span>
<span class="mi">81</span>    
<span class="mi">82</span>          <span class="k">assert</span><span class="p">(</span><span class="nx">outcome</span> <span class="o">==</span> <span class="nx">A_WINS</span> <span class="o">||</span> <span class="nx">outcome</span> <span class="o">==</span> <span class="nx">B_WINS</span><span class="p">);</span>
<span class="mi">83</span>          <span class="k">transfer</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">wager</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">outcome</span> <span class="o">==</span> <span class="nx">A_WINS</span> <span class="o">?</span> <span class="nx">A</span> <span class="o">:</span> <span class="nx">B</span><span class="p">);</span>
<span class="mi">84</span>          <span class="k">commit</span><span class="p">();</span>
<span class="mi">85</span>    
<span class="mi">86</span>          <span class="nx">each</span><span class="p">([</span><span class="nx">A</span><span class="p">,</span> <span class="nx">B</span><span class="p">],</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">87</span>            <span class="k">interact</span><span class="p">.</span><span class="nx">seeOutcome</span><span class="p">(</span><span class="nx">outcome</span><span class="p">);</span> <span class="p">});</span>
<span class="mi">88</span>          <span class="k">exit</span><span class="p">();</span> <span class="p">});</span>
</pre></div>
</div></p><p>Next, the JavaScript frontend:</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-7/index.mjs"><span class="stt">tut-7/index.mjs</span></a></p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span> <span class="mi">1</span>    <span class="kr">import</span> <span class="o">*</span> <span class="nx">as</span> <span class="nx">stdlib</span> <span class="nx">from</span> <span class="s1">&#39;@reach-sh/stdlib/ETH.mjs&#39;</span><span class="p">;</span>
 <span class="mi">2</span>    <span class="kr">import</span> <span class="o">*</span> <span class="nx">as</span> <span class="nx">backend</span> <span class="nx">from</span> <span class="s1">&#39;./build/index.main.mjs&#39;</span><span class="p">;</span>
 <span class="mi">3</span>    <span class="kr">import</span> <span class="p">{</span> <span class="nx">ask</span><span class="p">,</span> <span class="nx">yesno</span><span class="p">,</span> <span class="nx">done</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@reach-sh/stdlib/ask.mjs&#39;</span><span class="p">;</span>
 <span class="mi">4</span>    
 <span class="mi">5</span>    <span class="p">(</span> <span class="nx">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
 <span class="mi">6</span>      <span class="kr">const</span> <span class="nx">toNetworkFormat</span> <span class="o">=</span> <span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">stdlib</span><span class="p">.</span><span class="nx">toWeiBigNumber</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="s1">&#39;ether&#39;</span><span class="p">);</span>
 <span class="mi">7</span>    
 <span class="mi">8</span>      <span class="kr">const</span> <span class="nx">isAlice</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">ask</span><span class="p">(</span>
 <span class="mi">9</span>        <span class="sb">`Are you Alice?`</span><span class="p">,</span> <span class="nx">yesno</span><span class="p">);</span>
<span class="mi">10</span>      <span class="kr">const</span> <span class="nx">who</span> <span class="o">=</span> <span class="nx">isAlice</span> <span class="o">?</span> <span class="s1">&#39;Alice&#39;</span> <span class="o">:</span> <span class="s1">&#39;Bob&#39;</span><span class="p">;</span>
<span class="mi">11</span>    
<span class="mi">12</span>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Starting Rock, Paper, Scissors! as </span><span class="si">${</span><span class="nx">who</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="mi">13</span>    
<span class="mi">14</span>      <span class="kd">let</span> <span class="nx">acc</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="mi">15</span>      <span class="k">if</span> <span class="p">(</span> <span class="nx">await</span> <span class="nx">ask</span><span class="p">(</span>
<span class="mi">16</span>        <span class="sb">`Would you like to create an account? (only possible on devnet)`</span><span class="p">,</span> <span class="nx">yesno</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
<span class="mi">17</span>        <span class="nx">acc</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">stdlib</span><span class="p">.</span><span class="nx">newTestAccount</span><span class="p">(</span> <span class="nx">toNetworkFormat</span><span class="p">(</span><span class="s1">&#39;1000&#39;</span><span class="p">)</span> <span class="p">);</span> <span class="p">}</span>
<span class="mi">18</span>      <span class="k">else</span> <span class="p">{</span>
<span class="mi">19</span>        <span class="kr">const</span> <span class="nx">phrase</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">ask</span><span class="p">(</span>
<span class="mi">20</span>          <span class="sb">`What is your account mnemonic?`</span><span class="p">,</span> <span class="p">(</span><span class="nx">x</span> <span class="p">=&gt;</span> <span class="nx">x</span><span class="p">));</span>
<span class="mi">21</span>        <span class="nx">acc</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">stdlib</span><span class="p">.</span><span class="nx">newAccountFromMnemonic</span><span class="p">(</span><span class="nx">phrase</span><span class="p">);</span> <span class="p">}</span>
<span class="mi">22</span>    
<span class="mi">23</span>      <span class="kd">let</span> <span class="nx">ctc</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="mi">24</span>      <span class="k">if</span> <span class="p">(</span> <span class="nx">await</span> <span class="nx">ask</span><span class="p">(</span>
<span class="mi">25</span>        <span class="sb">`Do you want to deploy the contract? (y/n)`</span><span class="p">,</span> <span class="nx">yesno</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
<span class="mi">26</span>        <span class="nx">ctc</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">acc</span><span class="p">.</span><span class="nx">deploy</span><span class="p">(</span><span class="nx">backend</span><span class="p">);</span>
<span class="mi">27</span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`The contract is deployed as = </span><span class="si">${</span><span class="nx">ctc</span><span class="p">.</span><span class="nx">info</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span> <span class="p">}</span>
<span class="mi">28</span>      <span class="k">else</span> <span class="p">{</span>
<span class="mi">29</span>        <span class="kr">const</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">ask</span><span class="p">(</span>
<span class="mi">30</span>          <span class="sb">`Please paste the contract information:`</span><span class="p">,</span>
<span class="mi">31</span>          <span class="nx">stdlib</span><span class="p">.</span><span class="nx">ctcFromInfo</span> <span class="p">);</span>
<span class="mi">32</span>        <span class="nx">ctc</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">acc</span><span class="p">.</span><span class="nx">attach</span><span class="p">(</span><span class="nx">backend</span><span class="p">,</span> <span class="nx">info</span><span class="p">);</span> <span class="p">}</span>
<span class="mi">33</span>    
<span class="mi">34</span>      <span class="kr">const</span> <span class="nx">getBalance</span> <span class="o">=</span> <span class="nx">async</span> <span class="p">()</span> <span class="p">=&gt;</span>
<span class="mi">35</span>            <span class="nx">stdlib</span><span class="p">.</span><span class="nx">fromWei</span> <span class="p">(</span> <span class="nx">await</span> <span class="nx">stdlib</span><span class="p">.</span><span class="nx">balanceOf</span><span class="p">(</span><span class="nx">acc</span><span class="p">)</span> <span class="p">);</span>
<span class="mi">36</span>    
<span class="mi">37</span>      <span class="kr">const</span> <span class="nx">before</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">getBalance</span><span class="p">();</span>
<span class="mi">38</span>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Your balance is </span><span class="si">${</span><span class="nx">before</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="mi">39</span>    
<span class="mi">40</span>      <span class="kr">const</span> <span class="nx">interact</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">stdlib</span><span class="p">.</span><span class="nx">hasRandom</span> <span class="p">};</span>
<span class="mi">41</span>    
<span class="mi">42</span>      <span class="nx">interact</span><span class="p">.</span><span class="nx">informTimeout</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">43</span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`There was a timeout.`</span><span class="p">);</span>
<span class="mi">44</span>        <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="p">};</span>
<span class="mi">45</span>    
<span class="mi">46</span>      <span class="k">if</span> <span class="p">(</span> <span class="nx">isAlice</span> <span class="p">)</span> <span class="p">{</span>
<span class="mi">47</span>        <span class="kr">const</span> <span class="nx">amt</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">ask</span><span class="p">(</span>
<span class="mi">48</span>          <span class="sb">`How much do you want to wager?`</span><span class="p">,</span>
<span class="mi">49</span>          <span class="nx">toNetworkFormat</span> <span class="p">);</span>
<span class="mi">50</span>        <span class="nx">interact</span><span class="p">.</span><span class="nx">wager</span> <span class="o">=</span> <span class="nx">amt</span><span class="p">;</span> <span class="p">}</span>
<span class="mi">51</span>      <span class="k">else</span> <span class="p">{</span>
<span class="mi">52</span>        <span class="nx">interact</span><span class="p">.</span><span class="nx">acceptWager</span> <span class="o">=</span>
<span class="mi">53</span>          <span class="nx">async</span> <span class="p">(</span><span class="nx">amt</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">54</span>            <span class="k">if</span> <span class="p">(</span> <span class="nx">await</span> <span class="nx">ask</span><span class="p">(</span>
<span class="mi">55</span>              <span class="sb">`Do you accept the wager of </span><span class="si">${</span><span class="nx">stdlib</span><span class="p">.</span><span class="nx">fromWei</span><span class="p">(</span><span class="nx">amt</span><span class="p">)</span><span class="si">}</span><span class="sb">?`</span><span class="p">,</span>
<span class="mi">56</span>              <span class="nx">yesno</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
<span class="mi">57</span>              <span class="k">return</span><span class="p">;</span> <span class="p">}</span>
<span class="mi">58</span>            <span class="k">else</span> <span class="p">{</span>
<span class="mi">59</span>              <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
<span class="mi">60</span>    
<span class="mi">61</span>      <span class="kr">const</span> <span class="nx">HAND</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Rock&#39;</span><span class="p">,</span> <span class="s1">&#39;Paper&#39;</span><span class="p">,</span> <span class="s1">&#39;Scissors&#39;</span><span class="p">];</span>
<span class="mi">62</span>      <span class="kr">const</span> <span class="nx">HANDS</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Rock&#39;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;R&#39;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="mi">63</span>                     <span class="s1">&#39;Paper&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;P&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="mi">64</span>                     <span class="s1">&#39;Scissors&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="o">:</span> <span class="mi">2</span> <span class="p">};</span>
<span class="mi">65</span>      <span class="nx">interact</span><span class="p">.</span><span class="nx">getHand</span> <span class="o">=</span>
<span class="mi">66</span>        <span class="nx">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">67</span>          <span class="kr">const</span> <span class="nx">hand</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">ask</span><span class="p">(</span>
<span class="mi">68</span>            <span class="sb">`What hand will you play?`</span><span class="p">,</span>
<span class="mi">69</span>            <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">70</span>              <span class="kr">const</span> <span class="nx">hand</span> <span class="o">=</span> <span class="nx">HANDS</span><span class="p">[</span><span class="nx">x</span><span class="p">];</span>
<span class="mi">71</span>              <span class="k">if</span> <span class="p">(</span> <span class="nx">hand</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
<span class="mi">72</span>                <span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="sb">`Not a valid hand </span><span class="si">${</span><span class="nx">hand</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span> <span class="p">}</span>
<span class="mi">73</span>              <span class="k">return</span> <span class="nx">hand</span><span class="p">;</span> <span class="p">}</span> <span class="p">);</span>
<span class="mi">74</span>          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`You played </span><span class="si">${</span><span class="nx">HAND</span><span class="p">[</span><span class="nx">hand</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="mi">75</span>          <span class="k">return</span> <span class="nx">hand</span><span class="p">;</span> <span class="p">};</span>
<span class="mi">76</span>    
<span class="mi">77</span>      <span class="kr">const</span> <span class="nx">OUTCOME</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Bob wins&#39;</span><span class="p">,</span> <span class="s1">&#39;Draw&#39;</span><span class="p">,</span> <span class="s1">&#39;Alice wins&#39;</span><span class="p">];</span>
<span class="mi">78</span>      <span class="nx">interact</span><span class="p">.</span><span class="nx">seeOutcome</span> <span class="o">=</span>
<span class="mi">79</span>        <span class="nx">async</span> <span class="p">(</span><span class="nx">outcome</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">80</span>          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`The outcome is: </span><span class="si">${</span><span class="nx">OUTCOME</span><span class="p">[</span><span class="nx">outcome</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span> <span class="p">};</span>
<span class="mi">81</span>    
<span class="mi">82</span>      <span class="kr">const</span> <span class="nx">part</span> <span class="o">=</span> <span class="nx">isAlice</span> <span class="o">?</span> <span class="nx">backend</span><span class="p">.</span><span class="nx">Alice</span> <span class="o">:</span> <span class="nx">backend</span><span class="p">.</span><span class="nx">Bob</span><span class="p">;</span>
<span class="mi">83</span>      <span class="nx">await</span> <span class="nx">part</span><span class="p">(</span><span class="nx">stdlib</span><span class="p">,</span> <span class="nx">ctc</span><span class="p">,</span> <span class="nx">interact</span><span class="p">);</span>
<span class="mi">84</span>    
<span class="mi">85</span>      <span class="kr">const</span> <span class="nx">after</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">getBalance</span><span class="p">();</span>
<span class="mi">86</span>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Your balance is now </span><span class="si">${</span><span class="nx">after</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="mi">87</span>    
<span class="mi">88</span>      <span class="nx">done</span><span class="p">();</span>
<span class="mi">89</span>    <span class="p">})();</span>
</pre></div>
</div></p><p>We wrote 88 lines of Reach and 89 lines of JavaScript, or 177 lines together.</p><p>Behind the scenes, Reach generated 197 lines of Solidity (which you can look at here: <a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-7/build/index.main.sol"><span class="stt">tut-7/build/index.main.sol</span></a>), as well as 696 lines of JavaScript (which you can look at here: <a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-7/build/index.main.mjs"><span class="stt">tut-7/build/index.main.mjs</span></a>).
If we weren&rsquo;t using Reach, then we&rsquo;d have to write these 893 lines ourselves and ensure that they are consistent and updated at every change to the application.</p><p>Now that you&rsquo;ve seen an entire Reach application from beginning to end, it&rsquo;s time for you to start working on your own application!</p><ul><li><p>You may want to start <a href="workshop.html" data-pltdoc="x">the workshop</a>, which is a self-study course on practicing and learning Reach through different specific projects.</p></li><li><p>Or, maybe you&rsquo;d like to spent some time in <a href="guide.html" data-pltdoc="x">the guide</a> learning about the background of some of the concepts used in Reach programs.</p></li><li><p>Or, maybe it&rsquo;s time for you to dive into <a href="ref.html" data-pltdoc="x">the reference</a> and look into the minutae of Reach&rsquo;s features.</p></li></ul><p>Now matter what you decide to read or work on next, we hope you&rsquo;ll join us on <a href="https://discord.gg/AZsgcXu">the Discord community</a>.
Once you join, message <span class="RktInBG"><span class="hspace"></span><span class="RktIn">@team, I just completed the tutorial!</span><span class="hspace"></span></span> and we&rsquo;ll give you the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">tutorial veteran</span><span class="hspace"></span></span> role, so you can more easily help others work through it!</p><p>Thanks for spending your afternoon with us!</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="tut-7.html" title="backward to &quot;2.8 Interaction and Independence&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="tut.html" title="up to &quot;2 Tutorial&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="guide.html" title="forward to &quot;3 Guide&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>