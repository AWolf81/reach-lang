<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-149147406-1"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-149147406-1');</script><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>2.3&nbsp;Rock, Paper, and Scissors</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="minted-solarizedlight-style.css" title="default"/><link rel="stylesheet" type="text/css" href="minted.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Reach:<span class="mywbr"> &nbsp;</span> The Safest and Easiest DApp Programming Language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="tut.html" class="tocviewselflink" data-pltdoc="x">Tutorial</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="guide.html" class="tocviewlink" data-pltdoc="x">Guide</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="workshop.html" class="tocviewlink" data-pltdoc="x">Workshop</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="ref.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>2&nbsp;</td><td><a href="tut.html" class="tocviewlink" data-pltdoc="x">Tutorial</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="tut-0.html" class="tocviewlink" data-pltdoc="x">Install and Initialize</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="tut-1.html" class="tocviewlink" data-pltdoc="x">Scaffolding and Setup</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Rock, Paper, and Scissors</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="tut-3.html" class="tocviewlink" data-pltdoc="x">Bets and Wagers</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="tut-4.html" class="tocviewlink" data-pltdoc="x">Trust and Commitments</a></td></tr><tr><td align="right">2.6&nbsp;</td><td><a href="tut-5.html" class="tocviewlink" data-pltdoc="x">Timeouts and Participation</a></td></tr><tr><td align="right">2.7&nbsp;</td><td><a href="tut-6.html" class="tocviewlink" data-pltdoc="x">Play and Play Again</a></td></tr><tr><td align="right">2.8&nbsp;</td><td><a href="tut-7.html" class="tocviewlink" data-pltdoc="x">Interaction and Independence</a></td></tr><tr><td align="right">2.9&nbsp;</td><td><a href="tut-8.html" class="tocviewlink" data-pltdoc="x">Onward and Further</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="tut-1.html" title="backward to &quot;2.2 Scaffolding and Setup&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="tut.html" title="up to &quot;2 Tutorial&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="tut-3.html" title="forward to &quot;2.4 Bets and Wagers&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>2.3<tt>&nbsp;</tt><a name="(part._tut-2)"></a>Rock, Paper, and Scissors</h4><p>In this section, we&rsquo;ll have Alice and Bob actually execute the game of <span class="emph">Rock, Paper, Scissors</span>.</p><p>We have to decide how to represent the hands of the game.
A simple way is to represent them as the numbers <code class="highlight-inline"><span class="mi">0</span></code>, <code class="highlight-inline"><span class="mi">1</span></code>, and <code class="highlight-inline"><span class="mi">2</span></code>, standing for <span class="RktInBG"><span class="hspace"></span><span class="RktIn">Rock</span><span class="hspace"></span></span>, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">Paper</span><span class="hspace"></span></span>, and <span class="RktInBG"><span class="hspace"></span><span class="RktIn">Scissors</span><span class="hspace"></span></span>.
However, Reach only supports unsigned integers of 256 bits, so it is better to represent them as the equivalence class of integers modulo three, so we won&rsquo;t distinguish between <code class="highlight-inline"><span class="mi">0</span></code> and <code class="highlight-inline"><span class="mi">3</span></code> as <span class="RktInBG"><span class="hspace"></span><span class="RktIn">Rock</span><span class="hspace"></span></span>.</p><p>We&rsquo;ll use a similar strategy for representing the three outcomes of the game: <span class="RktInBG"><span class="hspace"></span><span class="RktIn">B wins</span><span class="hspace"></span></span>, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">Draw</span><span class="hspace"></span></span>, and <span class="RktInBG"><span class="hspace"></span><span class="RktIn">A wins</span><span class="hspace"></span></span>.</p><p>The first step is to change the Reach program to specify that Alice and Bob&rsquo;s frontends can be interacted with to get the move that they will play, and later informed of the outcome of the game.</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-2/index.rsh"><span class="stt">tut-2/index.rsh</span></a></p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span> <span class="mi">1</span>    <span class="s1">&#39;reach 0.1&#39;</span><span class="p">;</span>
 <span class="mi">2</span>    
 <span class="mi">3</span>    <span class="kd">const</span> <span class="nx">Player</span> <span class="o">=</span>
 <span class="mi">4</span>          <span class="p">{</span> <span class="nx">getHand</span><span class="o">:</span> <span class="nb">Fun</span><span class="p">([],</span> <span class="nb">UInt256</span><span class="p">),</span>
 <span class="mi">5</span>            <span class="nx">seeOutcome</span><span class="o">:</span> <span class="nb">Fun</span><span class="p">([</span><span class="nb">UInt256</span><span class="p">],</span> <span class="nb">Null</span><span class="p">)</span> <span class="p">};</span>
 <span class="mi">6</span>    
 <span class="mi">7</span>    <span class="kd">export</span> <span class="kd">const</span> <span class="nx">main</span> <span class="o">=</span>
 <span class="mi">8</span>      <span class="nb">Reach</span><span class="p">.</span><span class="nb">App</span><span class="p">(</span>
 <span class="mi">9</span>        <span class="p">{},</span>
<span class="mi">10</span>        <span class="p">[[</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="nx">Player</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="nx">Player</span><span class="p">]],</span>
<span class="mi">11</span>        <span class="p">(</span><span class="nx">A</span><span class="p">,</span> <span class="nx">B</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="p">..</span>          <span class="c1">// ...</span>
<span class="mi">26</span>          <span class="k">exit</span><span class="p">();</span> <span class="p">});</span>
</pre></div>
</div></p><ul><li><p>Lines 3 through 5 defines a <a href="ref-programs-module.html#%28tech._participant._interact._interface%29" class="techoutside" data-pltdoc="x"><span class="techinside">participant interact interface</span></a> that will be shared between the two players.
In this case, it provides two methods: <code class="highlight-inline"><span class="nx">getHand</span></code>, which returns a number; and <code class="highlight-inline"><span class="nx">seeOutcome</span></code>, which receives a number.</p></li><li><p>Line 10 uses this interface for both participants.
Because of this line, <code class="highlight-inline"><span class="k">interact</span></code> in the rest of the program will be bound to an object with methods corresponding to the these actions, which will connect to the <a href="ref-model.html#%28tech._frontend%29" class="techoutside" data-pltdoc="x"><span class="techinside">frontend</span></a> of the corresponding participant.</p></li></ul><p>Before continuing with the Reach application, let&rsquo;s move over to the JavaScript interface and implement these methods in our <a href="ref-model.html#%28tech._frontend%29" class="techoutside" data-pltdoc="x"><span class="techinside">frontend</span></a>.</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-2/index.mjs#L13-L29"><span class="stt">tut-2/index.mjs</span></a></p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="p">..</span>    <span class="c1">// ...</span>
<span class="mi">13</span>    <span class="kr">const</span> <span class="nx">HAND</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Rock&#39;</span><span class="p">,</span> <span class="s1">&#39;Paper&#39;</span><span class="p">,</span> <span class="s1">&#39;Scissors&#39;</span><span class="p">];</span>
<span class="mi">14</span>    <span class="kr">const</span> <span class="nx">OUTCOME</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Bob wins&#39;</span><span class="p">,</span> <span class="s1">&#39;Draw&#39;</span><span class="p">,</span> <span class="s1">&#39;Alice wins&#39;</span><span class="p">];</span>
<span class="mi">15</span>    <span class="kr">const</span> <span class="nx">Player</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Who</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span>
<span class="mi">16</span>      <span class="nx">getHand</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="kr">const</span> <span class="nx">hand</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">3</span><span class="p">);</span>
<span class="mi">17</span>                       <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">Who</span><span class="si">}</span><span class="sb"> played </span><span class="si">${</span><span class="nx">HAND</span><span class="p">[</span><span class="nx">hand</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="mi">18</span>                       <span class="k">return</span> <span class="nx">hand</span><span class="p">;</span> <span class="p">},</span>
<span class="mi">19</span>      <span class="nx">seeOutcome</span><span class="o">:</span> <span class="p">(</span><span class="nx">outcome</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="mi">20</span>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">Who</span><span class="si">}</span><span class="sb"> saw outcome </span><span class="si">${</span><span class="nx">OUTCOME</span><span class="p">[</span><span class="nx">outcome</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span> <span class="p">});</span>
<span class="mi">21</span>    
<span class="mi">22</span>    <span class="nx">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
<span class="mi">23</span>      <span class="nx">backend</span><span class="p">.</span><span class="nx">Alice</span><span class="p">(</span>
<span class="mi">24</span>        <span class="nx">stdlib</span><span class="p">,</span> <span class="nx">ctcAlice</span><span class="p">,</span>
<span class="mi">25</span>        <span class="nx">Player</span><span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">)),</span>
<span class="mi">26</span>      <span class="nx">backend</span><span class="p">.</span><span class="nx">Bob</span><span class="p">(</span>
<span class="mi">27</span>        <span class="nx">stdlib</span><span class="p">,</span> <span class="nx">ctcBob</span><span class="p">,</span>
<span class="mi">28</span>        <span class="nx">Player</span><span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">))</span>
<span class="mi">29</span>    <span class="p">]);</span>
<span class="p">..</span>    <span class="c1">// ...</span>
</pre></div>
</div></p><ul><li><p>Lines 13 and 14 define arrays to hold the meaning of the hands and outcomes.</p></li><li><p>Line 15 defines a constructor for the <code class="highlight-inline"><span class="nx">Player</span></code> implementation.</p></li><li><p>Lines 16 through 18 define the <code class="highlight-inline"><span class="nx">getHand</span></code> method.</p></li><li><p>Lines 19 and 20 define the <code class="highlight-inline"><span class="nx">seeOutcome</span></code> method.</p></li><li><p>Finally, lines 25 and 28 instantiate the implementation once for Alice and once for Bob.
These are the actual objects that will be bound to <code class="highlight-inline"><span class="k">interact</span></code> in the Reach program.</p></li></ul><p>There should be nothing interesting or controversial about these implementations; that&rsquo;s the point of Reach: we get to just write normal business logic without worrying about the details of the <a href="ref-model.html#%28tech._consensus._network%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus network</span></a> and decentralized application.</p><p>Let&rsquo;s return to the Reach program and look inside of the body of the program for what actions Alice and Bob take.</p><p>The game proceeds in three steps.</p><p>First, Alice&rsquo;s backend interacts with her frontend, gets her hand, and publishes it.</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-2/index.rsh#L12-L15"><span class="stt">tut-2/index.rsh</span></a></p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="p">..</span>    <span class="c1">// ...</span>
<span class="mi">12</span>    <span class="nx">A</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">13</span>      <span class="kd">const</span> <span class="nx">handA</span> <span class="o">=</span> <span class="k">declassify</span><span class="p">(</span><span class="k">interact</span><span class="p">.</span><span class="nx">getHand</span><span class="p">());</span> <span class="p">});</span>
<span class="mi">14</span>    <span class="nx">A</span><span class="p">.</span><span class="k">publish</span><span class="p">(</span><span class="nx">handA</span><span class="p">);</span>
<span class="mi">15</span>    <span class="k">commit</span><span class="p">();</span>
<span class="p">..</span>    <span class="c1">// ...</span>
</pre></div>
</div></p><ul><li><p>Line 12 states that this block of code is something that <span class="emph">only</span> <code class="highlight-inline"><span class="nx">A</span></code> (i.e., Alice) performs.</p></li><li><p>That means that the variable, <code class="highlight-inline"><span class="nx">handA</span></code>, bound on line 13 is known only to Alice.</p></li><li><p>Line 13 binds that value to the result of interacting with Alice through the <code class="highlight-inline"><span class="nx">getHand</span></code> method, which we wrote in JavaScript.</p></li><li><p>Line 13 also <a href="ref-programs-local.html#%28tech._declassify%29" class="techoutside" data-pltdoc="x"><span class="techinside">declassifies</span></a> the value, because in Reach, all information from <a href="ref-model.html#%28tech._frontend%29" class="techoutside" data-pltdoc="x"><span class="techinside">frontends</span></a> is <a href="ref-programs-valid.html#%28tech._secret%29" class="techoutside" data-pltdoc="x"><span class="techinside">secret</span></a> until it is explicitly made public.</p></li><li><p>Line 14 has Alice <a href="ref-model.html#%28tech._join%29" class="techoutside" data-pltdoc="x"><span class="techinside">join</span></a> the application by publishing the value to the <a href="ref-model.html#%28tech._consensus._network%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus network</span></a>, so it can be used to evaluate the outcome of the game.
Once this happens, the code is in a "<a href="ref-model.html#%28tech._consensus._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus step</span></a>" where all participants act together.</p></li><li><p>Line 15 commits the state of the <a href="ref-model.html#%28tech._consensus._network%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus network</span></a> and returns to "<a href="ref-model.html#%28tech._local._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">local step</span></a>" where individual participants can act alone.</p></li></ul><p>The next step is similar, in that Bob publishes his hand; however, we don&rsquo;t immediately commit the state, instead we compute the outcome of the game.</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-2/index.rsh#L17-L22"><span class="stt">tut-2/index.rsh</span></a></p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="p">..</span>    <span class="c1">// ...</span>
<span class="mi">17</span>    <span class="nx">B</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">18</span>      <span class="kd">const</span> <span class="nx">handB</span> <span class="o">=</span> <span class="k">declassify</span><span class="p">(</span><span class="k">interact</span><span class="p">.</span><span class="nx">getHand</span><span class="p">());</span> <span class="p">});</span>
<span class="mi">19</span>    <span class="nx">B</span><span class="p">.</span><span class="k">publish</span><span class="p">(</span><span class="nx">handB</span><span class="p">);</span>
<span class="mi">20</span>    
<span class="mi">21</span>    <span class="kd">const</span> <span class="nx">outcome</span> <span class="o">=</span> <span class="p">(</span><span class="nx">handA</span> <span class="o">+</span> <span class="p">(</span><span class="mi">4</span> <span class="o">-</span> <span class="nx">handB</span><span class="p">))</span> <span class="o">%</span> <span class="mi">3</span><span class="p">;</span>
<span class="mi">22</span>    <span class="k">commit</span><span class="p">();</span>
<span class="p">..</span>    <span class="c1">// ...</span>
</pre></div>
</div></p><ul><li><p>Lines 17 through 19 match Alice&rsquo;s similar <a href="ref-model.html#%28tech._local._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">local step</span></a> and <a href="ref-model.html#%28tech._join%29" class="techoutside" data-pltdoc="x"><span class="techinside">join</span></a>ing of the application through a <a href="ref-model.html#%28tech._consensus._transfer%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus transfer</span></a> <a href="ref-model.html#%28tech._publication%29" class="techoutside" data-pltdoc="x"><span class="techinside">publication</span></a>.</p></li><li><p>But, line 21 computes the outcome of the game before committing.
(<code class="highlight-inline"><span class="p">(</span><span class="nx">handA</span> <span class="o">+</span> <span class="p">(</span><span class="mi">4</span> <span class="o">-</span> <span class="nx">handB</span><span class="p">))</span> <span class="o">%</span> <span class="mi">3</span></code> is a clever equation to compute the winner of a game of <span class="emph">Rock, Paper, Scissors</span> using modular arithmetic.
Consider when <code class="highlight-inline"><span class="nx">handA</span></code> is <code class="highlight-inline"><span class="mi">0</span></code> (i.e., <span class="RktInBG"><span class="hspace"></span><span class="RktIn">Rock</span><span class="hspace"></span></span>) and <code class="highlight-inline"><span class="nx">handB</span></code> is <code class="highlight-inline"><span class="mi">2</span></code> (i.e., <span class="RktInBG"><span class="hspace"></span><span class="RktIn">Scissors</span><span class="hspace"></span></span>), then this equation is <code class="highlight-inline"><span class="p">((</span><span class="nx">handA</span> <span class="o">+</span> <span class="p">(</span><span class="mi">4</span> <span class="o">-</span> <span class="nx">handB</span><span class="p">))</span> <span class="o">%</span> <span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="p">((</span><span class="mi">0</span> <span class="o">+</span> <span class="p">(</span><span class="mi">4</span> <span class="o">-</span> <span class="mi">2</span><span class="p">))</span> <span class="o">%</span> <span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="p">((</span><span class="mi">0</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">%</span> <span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="mi">2</span></code>, which is the last outcome, that is <span class="RktInBG"><span class="hspace"></span><span class="RktIn">A wins</span><span class="hspace"></span></span>, as we expect it to be.)</p></li></ul><p>Finally, we use the <a href="ref-programs-step.html#%28tech._each%29" class="techoutside" data-pltdoc="x"><span class="techinside">each</span></a> form to have each of the participants send the final outcome to their frontends.</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-2/index.rsh#L24-L25"><span class="stt">tut-2/index.rsh</span></a></p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="p">..</span>    <span class="c1">// ...</span>
<span class="mi">24</span>    <span class="nx">each</span><span class="p">([</span><span class="nx">A</span><span class="p">,</span> <span class="nx">B</span><span class="p">],</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mi">25</span>      <span class="k">interact</span><span class="p">.</span><span class="nx">seeOutcome</span><span class="p">(</span><span class="nx">outcome</span><span class="p">);</span> <span class="p">});</span>
<span class="p">..</span>    <span class="c1">// ...</span>
</pre></div>
</div></p><ul><li><p>Line 24 states that this is a <a href="ref-model.html#%28tech._local._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">local step</span></a> that <a href="ref-programs-step.html#%28tech._each%29" class="techoutside" data-pltdoc="x"><span class="techinside">each</span></a> of the participants performs.</p></li></ul><p>At this point, we can run the program and see its output by running</p><p><span class="hspace">&nbsp;&nbsp;</span><span style="font-weight: bold"><span class="stt">$</span></span><span class="stt"> </span><span class="stt">./reach run</span></p><p>Since the players act randomly, the results will be different every time.
When I ran the program three times, this is the output I got:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">$ ./reach run</span></p></td></tr><tr><td><p><span class="stt">Alice played Scissors</span></p></td></tr><tr><td><p><span class="stt">Bob played Paper</span></p></td></tr><tr><td><p><span class="stt">Alice saw outcome Alice wins</span></p></td></tr><tr><td><p><span class="stt">Bob saw outcome Alice wins</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">$ ./reach run</span></p></td></tr><tr><td><p><span class="stt">Alice played Scissors</span></p></td></tr><tr><td><p><span class="stt">Bob played Paper</span></p></td></tr><tr><td><p><span class="stt">Alice saw outcome Alice wins</span></p></td></tr><tr><td><p><span class="stt">Bob saw outcome Alice wins</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">$ ./reach run</span></p></td></tr><tr><td><p><span class="stt">Alice played Paper</span></p></td></tr><tr><td><p><span class="stt">Bob played Rock</span></p></td></tr><tr><td><p><span class="stt">Alice saw outcome Alice wins</span></p></td></tr><tr><td><p><span class="stt">Bob saw outcome Alice wins</span></p></td></tr></table></p><p>Alice is pretty good at <span class="emph">Rock, Paper, Scissors</span>!</p><p><a href="ref-model.html#%28tech._consensus._network%29" class="techoutside" data-pltdoc="x"><span class="techinside">Consensus networks</span></a> in general, and Reach specifically, guarantee that all participants agree on the outcome of the their decentralized computation.
Indeed, this is where the name <a href="ref-model.html#%28tech._consensus._network%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus network</span></a> comes from, as they enable these distributed, and untrusted, parties to come to a consensus, or agreement, about the intermediate states of a computation; and if they agree on the intermediate states, they will also agree on the output.
That&rsquo;s why every time you run <span class="stt">./reach run</span>, both Alice and Bob will see the same outcome!</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>If your version isn&rsquo;t working, look at the complete versions of <a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-2/index.rsh"><span class="stt">tut-2/index.rsh</span></a> and <a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-2/index.mjs"><span class="stt">tut-2/index.mjs</span></a> to make sure you copied everything down correctly!</p></blockquote></blockquote></blockquote><p>In <a href="tut-3.html" data-pltdoc="x">the next step</a>, we&rsquo;ll add some stakes to the game, because Alice needs to take her skills to the bank!</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="tut-1.html" title="backward to &quot;2.2 Scaffolding and Setup&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="tut.html" title="up to &quot;2 Tutorial&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="tut-3.html" title="forward to &quot;2.4 Bets and Wagers&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>