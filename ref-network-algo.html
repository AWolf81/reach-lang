<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-149147406-2"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-149147406-2');</script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script><script src="tooltips.js"></script><script src="reach-pre.js"></script><link rel="stylesheet" href="tooltips.css"><link rel="stylesheet" href="reach.css"><link rel="stylesheet" href="minted.css"><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"><link rel="manifest" href="/favicon/site.webmanifest"><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>5.5.2&nbsp;Algorand</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Reach:<span class="mywbr"> &nbsp;</span> The Safest and Easiest DApp Programming Language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="tut.html" class="tocviewlink" data-pltdoc="x">Tutorial</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="guide.html" class="tocviewlink" data-pltdoc="x">Guide</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="workshop.html" class="tocviewlink" data-pltdoc="x">Workshop</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="ref.html" class="tocviewselflink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>5&nbsp;</td><td><a href="ref.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr></table><div class="tocviewsublist" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.1&nbsp;</td><td><a href="install.html" class="tocviewlink" data-pltdoc="x">Installation</a></td></tr><tr><td align="right">5.2&nbsp;</td><td><a href="ref-usage.html" class="tocviewlink" data-pltdoc="x">Usage</a></td></tr><tr><td align="right">5.3&nbsp;</td><td><a href="ref-model.html" class="tocviewlink" data-pltdoc="x">Language Model</a></td></tr><tr><td align="right">5.4&nbsp;</td><td><a href="ref-programs.html" class="tocviewlink" data-pltdoc="x">Programs</a></td></tr><tr><td align="right">5.5&nbsp;</td><td><a href="ref-networks.html" class="tocviewselflink" data-pltdoc="x">Consensus Network Connectors</a></td></tr><tr><td align="right">5.6&nbsp;</td><td><a href="ref-backends.html" class="tocviewlink" data-pltdoc="x">Participant Backends</a></td></tr><tr><td align="right">5.7&nbsp;</td><td><a href="ref-frontends.html" class="tocviewlink" data-pltdoc="x">Frontend Support</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9660;</a></td><td>5.5&nbsp;</td><td><a href="ref-networks.html" class="tocviewlink" data-pltdoc="x">Consensus Network Connectors</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.5.1&nbsp;</td><td><a href="ref-network-eth.html" class="tocviewlink" data-pltdoc="x">Ethereum</a></td></tr><tr><td align="right">5.5.2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Algorand</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#%28env._.A.L.G.O_.T.O.K.E.N%29" class="tocsublink" data-pltdoc="x"><span class="stt">ALGO_<span class="mywbr"> &nbsp;</span>TOKEN</span></a></td></tr><tr><td><a href="#%28env._.A.L.G.O_.S.E.R.V.E.R%29" class="tocsublink" data-pltdoc="x"><span class="stt">ALGO_<span class="mywbr"> &nbsp;</span>SERVER</span></a></td></tr><tr><td><a href="#%28env._.A.L.G.O_.P.O.R.T%29" class="tocsublink" data-pltdoc="x"><span class="stt">ALGO_<span class="mywbr"> &nbsp;</span>PORT</span></a></td></tr><tr><td><a href="#%28env._.A.L.G.O_.I.N.D.E.X.E.R_.T.O.K.E.N%29" class="tocsublink" data-pltdoc="x"><span class="stt">ALGO_<span class="mywbr"> &nbsp;</span>INDEXER_<span class="mywbr"> &nbsp;</span>TOKEN</span></a></td></tr><tr><td><a href="#%28env._.A.L.G.O_.I.N.D.E.X.E.R_.S.E.R.V.E.R%29" class="tocsublink" data-pltdoc="x"><span class="stt">ALGO_<span class="mywbr"> &nbsp;</span>INDEXER_<span class="mywbr"> &nbsp;</span>SERVER</span></a></td></tr><tr><td><a href="#%28env._.A.L.G.O_.I.N.D.E.X.E.R_.P.O.R.T%29" class="tocsublink" data-pltdoc="x"><span class="stt">ALGO_<span class="mywbr"> &nbsp;</span>INDEXER_<span class="mywbr"> &nbsp;</span>PORT</span></a></td></tr><tr><td><a href="#%28env._.A.L.G.O_.F.A.U.C.E.T_.P.A.S.S.P.H.R.A.S.E%29" class="tocsublink" data-pltdoc="x"><span class="stt">ALGO_<span class="mywbr"> &nbsp;</span>FAUCET_<span class="mywbr"> &nbsp;</span>PASSPHRASE</span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search docs..." title="Enter a search string to search the Reach documentation" onkeypress="return reach_DoSearch(event, this);"></form>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="ref-network-eth.html" title="backward to &quot;5.5.1 Ethereum&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="ref-networks.html" title="up to &quot;5.5 Consensus Network Connectors&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ref-backends.html" title="forward to &quot;5.6 Participant Backends&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h5>5.5.2<tt>&nbsp;</tt><a name="(part._ref-network-algo)"></a>Algorand</h5><p>The <a href="https://www.algorand.com/">Algorand</a> Reach <a href="ref-model.html#%28tech._connector%29" class="techoutside" data-pltdoc="x"><span class="techinside">connector</span></a> generates a set of
<a href="ref-model.html#%28tech._contract%29" class="techoutside" data-pltdoc="x"><span class="techinside">contracts</span></a> that manage one instance of the <a href="ref-model.html#%28tech._dapp%29" class="techoutside" data-pltdoc="x"><span class="techinside">DApp</span></a>&rsquo;s
execution.</p><p>It uses finite on-chain state: two integers and one byte string.
The <a href="ref-model.html#%28tech._dapp%29" class="techoutside" data-pltdoc="x"><span class="techinside">DApp</span></a> consists of one application, one contract-controlled escrow account, and many contract-controlled handlers for each of the <a href="ref-model.html#%28tech._publication%29" class="techoutside" data-pltdoc="x"><span class="techinside">publications</span></a> of your Reach program.
During compilation, the connector produces intermediate outputs for each of these contracts.
These contracts embed references to each through their template arguments, which is done automatically by the Reach standard library implementation.</p><p>It relies on versions of <span class="stt">algod</span> that support TEAL 3, such as the Algorand BetaNet 2.5.2 release from mid-March 2021.
It uses the Algorand <span class="stt">indexer</span> version 2 to lookup and monitor <a href="ref-model.html#%28tech._publication%29" class="techoutside" data-pltdoc="x"><span class="techinside">publications</span></a>; in other words, it does <span class="emph">not</span> rely on any communication network other than Algorand itself.</p><p>Algorand uses the Keccak256 algorithm to perform <a href="ref-model.html#%28tech._digest%29" class="techoutside" data-pltdoc="x"><span class="techinside">digest</span></a>s.
Its <a href="ref-programs-compute.html#%28tech._bit._width%29" class="techoutside" data-pltdoc="x"><span class="techinside">bit width</span></a> is 64-bits.</p><p><a href="ref-model.html#%28tech._non._network._token%29" class="techoutside" data-pltdoc="x"><span class="techinside">Non-network tokens</span></a> are compiled to <a href="https://developer.algorand.org/docs/features/asa/">Algorand Standard Assets</a> (ASAs).
Reach programs that use <a href="ref-model.html#%28tech._non._network._token%29" class="techoutside" data-pltdoc="x"><span class="techinside">non-network tokens</span></a> deployed on Algorand are inherently vulnerable to a denial-of-service attack due the ability of Algorand accounts to "opt-out" of a token.
For example, if a program has a <a href="ref-model.html#%28tech._consensus._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus step</span></a> where Alice will receive 1 gil and Bob will receive 2 zorkmids, either Alice or Bob can prevent this step from executing by opting out of (respectively) gil or zorkmids.
(An "opt-out" is performed by sending an <a href="https://developer.algorand.org/docs/reference/transactions/#asset-transfer-transaction">Asset Transfer Transaction</a> (<span class="RktInBG"><span class="hspace"></span><span class="RktIn">axfer</span><span class="hspace"></span></span>) with a non-zero <span class="RktInBG"><span class="hspace"></span><span class="RktIn">AssetCloseTo</span><span class="hspace"></span></span> field.)
You can alleviate this problem by ensuring that any <a href="ref-model.html#%28tech._non._network._token%29" class="techoutside" data-pltdoc="x"><span class="techinside">non-network token</span></a> transfers occurs as the last consensus steps of the program and may be executed in any order by the recipient of the funds.
We hope that future versions of Algorand will provide a facility for preventing these denial-of-service attacks.</p><p><a href="ref-model.html#%28tech._view%29" class="techoutside" data-pltdoc="x"><span class="techinside">Views</span></a> are compiled to client-side functions that can interpret the global and local state of the Algorand Application associated with the <a href="ref-model.html#%28tech._dapp%29" class="techoutside" data-pltdoc="x"><span class="techinside">DApp</span></a>.
This means they are sensitive to the particular compilation details of the particular Reach program.
We hope to work with the Algorand community to define a standard for <a href="ref-model.html#%28tech._view%29" class="techoutside" data-pltdoc="x"><span class="techinside">views</span></a>.
<a href="ref-model.html#%28tech._view%29" class="techoutside" data-pltdoc="x"><span class="techinside">Views</span></a> expand the on-chain state to include the free variables of all values bound to a <a href="ref-model.html#%28tech._view%29" class="techoutside" data-pltdoc="x"><span class="techinside">view</span></a>.</p><p>This connector does not support different <code class="highlight"><a href="ref-programs-appinit.html#%28reach._%28%28deploy.Mode%29%29%29" class="nb" data-pltdoc="x">deployMode</a></code>s and treats them all as <code class="highlight"><span class="s1">&#39;constructor&#39;</span></code>.</p><p>The connector provides a binding named <code class="highlight"><a href="ref-programs-appinit.html#%28reach._%28%28.A.L.G.O%29%29%29" class="nb" data-pltdoc="x">ALGO</a></code> to
<a href="ref-model.html#%28tech._backend%29" class="techoutside" data-pltdoc="x"><span class="techinside">backends</span></a>.</p><p><a href="ref-model.html#%28tech._backend%29" class="techoutside" data-pltdoc="x"><span class="techinside">Backends</span></a> must respect the following environment variables:</p><ul><li><p><a name="(env._.A.L.G.O_.T.O.K.E.N)"></a><a name="(idx._(gentag._353))"></a><span class="stt">ALGO_TOKEN</span> is used as the API token for your <span class="stt">algod</span>.</p></li><li><p><a name="(env._.A.L.G.O_.S.E.R.V.E.R)"></a><a name="(idx._(gentag._354))"></a><span class="stt">ALGO_SERVER</span> is used as the address of your <span class="stt">algod</span>.</p></li><li><p><a name="(env._.A.L.G.O_.P.O.R.T)"></a><a name="(idx._(gentag._355))"></a><span class="stt">ALGO_PORT</span> is used as the port of your <span class="stt">algod</span>.</p></li><li><p><a name="(env._.A.L.G.O_.I.N.D.E.X.E.R_.T.O.K.E.N)"></a><a name="(idx._(gentag._356))"></a><span class="stt">ALGO_INDEXER_TOKEN</span> is used as the API token for your <span class="stt">indexer</span>.</p></li><li><p><a name="(env._.A.L.G.O_.I.N.D.E.X.E.R_.S.E.R.V.E.R)"></a><a name="(idx._(gentag._357))"></a><span class="stt">ALGO_INDEXER_SERVER</span> is used as the address of your <span class="stt">indexer</span>.</p></li><li><p><a name="(env._.A.L.G.O_.I.N.D.E.X.E.R_.P.O.R.T)"></a><a name="(idx._(gentag._358))"></a><span class="stt">ALGO_INDEXER_PORT</span> is used as the port of your <span class="stt">indexer</span>.</p></li><li><p><a name="(env._.A.L.G.O_.F.A.U.C.E.T_.P.A.S.S.P.H.R.A.S.E)"></a><a name="(idx._(gentag._359))"></a><span class="stt">ALGO_FAUCET_PASSPHRASE</span> is used as the mnemonic for the faucet of your network.
This is useful if you are running your own testing network.</p></li></ul><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search docs..." title="Enter a search string to search the Reach documentation" onkeypress="return reach_DoSearch(event, this);"></form>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="ref-network-eth.html" title="backward to &quot;5.5.1 Ethereum&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="ref-networks.html" title="up to &quot;5.5 Consensus Network Connectors&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ref-backends.html" title="forward to &quot;5.6 Participant Backends&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div><script src="reach-post.js"></script></body></html>