<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>5.4&nbsp;Programs</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="minted-solarizedlight-style.css" title="default"/><link rel="stylesheet" type="text/css" href="minted.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Reach:<span class="mywbr"> &nbsp;</span> The Safest and Easiest DApp Programming Language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="tut.html" class="tocviewlink" data-pltdoc="x">Tutorial</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="guide.html" class="tocviewlink" data-pltdoc="x">Guide</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="workshop.html" class="tocviewlink" data-pltdoc="x">Workshop</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="ref.html" class="tocviewselflink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>5&nbsp;</td><td><a href="ref.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.1&nbsp;</td><td><a href="install.html" class="tocviewlink" data-pltdoc="x">Installation</a></td></tr><tr><td align="right">5.2&nbsp;</td><td><a href="ref-usage.html" class="tocviewlink" data-pltdoc="x">Usage</a></td></tr><tr><td align="right">5.3&nbsp;</td><td><a href="ref-model.html" class="tocviewlink" data-pltdoc="x">Language Model</a></td></tr><tr><td align="right">5.4&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Programs</a></td></tr><tr><td align="right">5.5&nbsp;</td><td><a href="ref-networks.html" class="tocviewlink" data-pltdoc="x">Consensus Network Connectors</a></td></tr><tr><td align="right">5.6&nbsp;</td><td><a href="ref-backends.html" class="tocviewlink" data-pltdoc="x">Participant Backends</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>5.4&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Programs</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.4.1&nbsp;</td><td><a href="#%28part._.Validity%29" class="tocviewlink" data-pltdoc="x">Validity</a></td></tr><tr><td align="right">5.4.2&nbsp;</td><td><a href="#%28part._.Modules%29" class="tocviewlink" data-pltdoc="x">Modules</a></td></tr><tr><td align="right">5.4.3&nbsp;</td><td><a href="#%28part._.Imports%29" class="tocviewlink" data-pltdoc="x">Imports</a></td></tr><tr><td align="right">5.4.4&nbsp;</td><td><a href="#%28part._.Comments%29" class="tocviewlink" data-pltdoc="x">Comments</a></td></tr><tr><td align="right">5.4.5&nbsp;</td><td><a href="#%28part._.Reach_.App%29" class="tocviewlink" data-pltdoc="x">Reach.App</a></td></tr><tr><td align="right">5.4.6&nbsp;</td><td><a href="#%28part._.Types%29" class="tocviewlink" data-pltdoc="x">Types</a></td></tr><tr><td align="right">5.4.7&nbsp;</td><td><a href="#%28part._.Identifier_.Definitions%29" class="tocviewlink" data-pltdoc="x">Identifier Definitions</a></td></tr><tr><td align="right">5.4.8&nbsp;</td><td><a href="#%28part._.Security_levels_and_scope%29" class="tocviewlink" data-pltdoc="x">Security levels and scope</a></td></tr><tr><td align="right">5.4.9&nbsp;</td><td><a href="#%28part._.Blocks%29" class="tocviewlink" data-pltdoc="x">Blocks</a></td></tr><tr><td align="right">5.4.10&nbsp;</td><td><a href="#%28part._.Statements%29" class="tocviewlink" data-pltdoc="x">Statements</a></td></tr><tr><td align="right">5.4.11&nbsp;</td><td><a href="#%28part._.Expressions%29" class="tocviewlink" data-pltdoc="x">Expressions</a></td></tr><tr><td align="right">5.4.12&nbsp;</td><td><a href="#%28part._.Standard_.Library%29" class="tocviewlink" data-pltdoc="x">Standard Library</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">5.4.1<tt>&nbsp;</tt></span><a href="#%28part._.Validity%29" class="tocsubseclink" data-pltdoc="x">Validity</a></td></tr><tr><td><span class="tocsublinknumber">5.4.2<tt>&nbsp;</tt></span><a href="#%28part._.Modules%29" class="tocsubseclink" data-pltdoc="x">Modules</a></td></tr><tr><td><span class="tocsublinknumber">5.4.3<tt>&nbsp;</tt></span><a href="#%28part._.Imports%29" class="tocsubseclink" data-pltdoc="x">Imports</a></td></tr><tr><td><span class="tocsublinknumber">5.4.4<tt>&nbsp;</tt></span><a href="#%28part._.Comments%29" class="tocsubseclink" data-pltdoc="x">Comments</a></td></tr><tr><td><span class="tocsublinknumber">5.4.5<tt>&nbsp;</tt></span><a href="#%28part._.Reach_.App%29" class="tocsubseclink" data-pltdoc="x">Reach.App</a></td></tr><tr><td><span class="tocsublinknumber">5.4.6<tt>&nbsp;</tt></span><a href="#%28part._.Types%29" class="tocsubseclink" data-pltdoc="x">Types</a></td></tr><tr><td><span class="tocsublinknumber">5.4.7<tt>&nbsp;</tt></span><a href="#%28part._.Identifier_.Definitions%29" class="tocsubseclink" data-pltdoc="x">Identifier Definitions</a></td></tr><tr><td><span class="tocsublinknumber">5.4.8<tt>&nbsp;</tt></span><a href="#%28part._.Security_levels_and_scope%29" class="tocsubseclink" data-pltdoc="x">Security levels and scope</a></td></tr><tr><td><span class="tocsublinknumber">5.4.9<tt>&nbsp;</tt></span><a href="#%28part._.Blocks%29" class="tocsubseclink" data-pltdoc="x">Blocks</a></td></tr><tr><td><span class="tocsublinknumber">5.4.10<tt>&nbsp;</tt></span><a href="#%28part._.Statements%29" class="tocsubseclink" data-pltdoc="x">Statements</a></td></tr><tr><td><span class="tocsublinknumber">5.4.10.1<tt>&nbsp;</tt></span><a href="#%28part._.Exit_statements%29" class="tocsubseclink" data-pltdoc="x">Exit statements</a></td></tr><tr><td><span class="tocsublinknumber">5.4.10.2<tt>&nbsp;</tt></span><a href="#%28part._.Return_statements%29" class="tocsubseclink" data-pltdoc="x">Return statements</a></td></tr><tr><td><span class="tocsublinknumber">5.4.10.3<tt>&nbsp;</tt></span><a href="#%28part._.Identifier_definition_statements%29" class="tocsubseclink" data-pltdoc="x">Identifier definition statements</a></td></tr><tr><td><span class="tocsublinknumber">5.4.10.4<tt>&nbsp;</tt></span><a href="#%28part._.Conditional_statements%29" class="tocsubseclink" data-pltdoc="x">Conditional statements</a></td></tr><tr><td><span class="tocsublinknumber">5.4.10.5<tt>&nbsp;</tt></span><a href="#%28part._.Block_statements%29" class="tocsubseclink" data-pltdoc="x">Block statements</a></td></tr><tr><td><span class="tocsublinknumber">5.4.10.6<tt>&nbsp;</tt></span><a href="#%28part._.Expression_statements%29" class="tocsubseclink" data-pltdoc="x">Expression statements</a></td></tr><tr><td><span class="tocsublinknumber">5.4.10.7<tt>&nbsp;</tt></span><a href="#%28part._.Local_step%29" class="tocsubseclink" data-pltdoc="x">Local step</a></td></tr><tr><td><span class="tocsublinknumber">5.4.10.8<tt>&nbsp;</tt></span><a href="#%28part._.Consensus_transfers%29" class="tocsubseclink" data-pltdoc="x">Consensus transfers</a></td></tr><tr><td><span class="tocsublinknumber">5.4.10.9<tt>&nbsp;</tt></span><a href="#%28part._.Commit_statements%29" class="tocsubseclink" data-pltdoc="x">Commit statements</a></td></tr><tr><td><span class="tocsublinknumber">5.4.10.10<tt>&nbsp;</tt></span><a href="#%28part._.While_statements%29" class="tocsubseclink" data-pltdoc="x">While statements</a></td></tr><tr><td><span class="tocsublinknumber">5.4.10.11<tt>&nbsp;</tt></span><a href="#%28part._.Continue_statements%29" class="tocsubseclink" data-pltdoc="x">Continue statements</a></td></tr><tr><td><span class="tocsublinknumber">5.4.11<tt>&nbsp;</tt></span><a href="#%28part._.Expressions%29" class="tocsubseclink" data-pltdoc="x">Expressions</a></td></tr><tr><td><span class="tocsublinknumber">5.4.12<tt>&nbsp;</tt></span><a href="#%28part._.Standard_.Library%29" class="tocsubseclink" data-pltdoc="x">Standard Library</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">0.1.0</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="ref-model.html" title="backward to &quot;5.3 Language Model&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="ref.html" title="up to &quot;5 Reference&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ref-networks.html" title="forward to &quot;5.5 Consensus Network Connectors&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>5.4<tt>&nbsp;</tt><a name="(part._ref-programs)"></a>Programs</h4><p>This document describes the structure and content of Reach <a href="#%28tech._program%29" class="techoutside" data-pltdoc="x"><span class="techinside">programs</span></a>, including
their syntactic forms,
the <a href="#%28tech._standard._library%29" class="techoutside" data-pltdoc="x"><span class="techinside">standard library</span></a>,
and the standards of <a href="#%28tech._valid%29" class="techoutside" data-pltdoc="x"><span class="techinside">valid</span></a> programs.</p><p>A Reach <a name="(tech._program)"></a><span style="font-style: italic">program</span> is
a <a href="#%28tech._module%29" class="techoutside" data-pltdoc="x"><span class="techinside">module</span></a> <a href="#%28tech._export%29" class="techoutside" data-pltdoc="x"><span class="techinside">export</span></a> specified by <a href="#%28tech._reach..app%29" class="techoutside" data-pltdoc="x"><span class="techinside">Reach.App</span></a>, as defined by a <a href="#%28tech._source._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">source file</span></a>.</p><p><a href="#%28tech._program%29" class="techoutside" data-pltdoc="x"><span class="techinside">Programs</span></a> may be <a href="ref-model.html#%28tech._compile%29" class="techoutside" data-pltdoc="x"><span class="techinside">compile</span></a>d using the command
<span class="stt">reach compile SOURCE EXPORT</span>; see <a href="ref-usage.html" data-pltdoc="x">Usage</a> for more usage options.</p><h5>5.4.1<tt>&nbsp;</tt><a name="(part._.Validity)"></a>Validity</h5><p>Reach imposes further restrictions on syntactically well-formed programs.
These restrictions are described throughout this manual using the term <a name="(tech._valid)"></a><span style="font-style: italic">valid</span> to refer to constructions that obey the restrictions,
and the term <a name="(tech._invalid)"></a><span style="font-style: italic">invalid</span> to refer to constructions that do not obey them.</p><p>It is always <a href="#%28tech._invalid%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> to use a <a href="ref-model.html#%28tech._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">value</span></a> with an operation for which it is undefined.
For example, <code class="highlight-inline"><span class="mi">1</span> <span class="o">+</span> <span class="kc">true</span></code> is <a href="#%28tech._invalid%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a>.
In other words, Reach enforces a static type discipline.</p><h5>5.4.2<tt>&nbsp;</tt><a name="(part._.Modules)"></a>Modules</h5><p>A Reach <a name="(tech._source._file)"></a><span style="font-style: italic">source file</span> is a textual file which specifies a Reach <a href="#%28tech._module%29" class="techoutside" data-pltdoc="x"><span class="techinside">module</span></a>.
It is traditionally given the file extension <span class="RktInBG"><span class="hspace"></span><span class="RktIn">rsh</span><span class="hspace"></span></span>,
e.g. <span class="stt">"dao.rsh"</span>.</p><p><div class="SIntrapara">A <a name="(tech._module)"></a><span style="font-style: italic">module</span> starts with <code class="highlight-inline"><span class="s1">&#39;reach 0.1&#39;</span><span class="p">;</span></code>
followed by a sequence of <a href="#%28tech._import%29" class="techoutside" data-pltdoc="x"><span class="techinside">imports</span></a> and <a href="#%28tech._identifier._definition%29" class="techoutside" data-pltdoc="x"><span class="techinside">identifier definitions</span></a>.
A module can only be compiled or used if it contain one or more <a href="#%28tech._export%29" class="techoutside" data-pltdoc="x"><span class="techinside">exports</span></a>.
</div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>See <a href="guide-versions.html" data-pltdoc="x">the guide section on versions</a> to understand how Reach uses version numbers like this.</p></blockquote></blockquote></blockquote></div></p><h5>5.4.3<tt>&nbsp;</tt><a name="(part._.Imports)"></a>Imports</h5><p><div class="highlight"><pre><span></span><span class="kd">import</span> <span class="s2">&quot;games-of-chance.rsh&quot;</span><span class="p">;</span>
</pre></div>
</p><p>When a <a href="#%28tech._module%29" class="techoutside" data-pltdoc="x"><span class="techinside">module</span></a>, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">X</span><span class="hspace"></span></span>, contains an <a name="(tech._import)"></a><span style="font-style: italic">import</span>,
written <code class="highlight-inline"><span class="kd">import</span> <span class="s2">&quot;LIB.rsh&quot;</span><span class="p">;</span></code>,
then the path <span class="stt">"LIB.rsh"</span> must resolve to another Reach <a href="#%28tech._source._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">source file</span></a>.
The <a href="#%28tech._export%29" class="techoutside" data-pltdoc="x"><span class="techinside">exports</span></a> from the <a href="#%28tech._module%29" class="techoutside" data-pltdoc="x"><span class="techinside">module</span></a> defined by <span class="stt">"LIB.rsh"</span> are included in the set of <a href="#%28tech._bound._identifier%29" class="techoutside" data-pltdoc="x"><span class="techinside">bound identifier</span></a>s in <span class="RktInBG"><span class="hspace"></span><span class="RktIn">X</span><span class="hspace"></span></span>.
<a href="#%28tech._import%29" class="techoutside" data-pltdoc="x"><span class="techinside">Import</span></a> cycles are <a href="#%28tech._invalid%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a>.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>The path given to an <a href="#%28tech._import%29" class="techoutside" data-pltdoc="x"><span class="techinside">import</span></a> may include <span class="RktInBG"><span class="hspace"></span><span class="RktIn">..</span><span class="hspace"></span></span> to specify files outside the current directory.
Relative paths resolve relative to the parent directory of the <a href="#%28tech._source._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">source file</span></a> in which they appear.</p></blockquote></blockquote></blockquote><h5>5.4.4<tt>&nbsp;</tt><a name="(part._.Comments)"></a>Comments</h5><p><div class="highlight"><pre><span></span><span class="c1">// single-line comment</span>
<span class="cm">/* multi-line</span>
<span class="cm">* comment</span>
<span class="cm">*/</span> 
</pre></div>
</p><p>Comments are text that is ignored by the compiler.  Text starting with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">//</span><span class="hspace"></span></span> up until the end of the line forms a <a name="(tech._single._line._comment)"></a><span style="font-style: italic">single-line comment</span>.  Text enclosed with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">/*</span><span class="hspace"></span></span> and <span class="RktInBG"><span class="hspace"></span><span class="RktIn">*/</span><span class="hspace"></span></span> forms a <a name="(tech._multi._line._comment)"></a><span style="font-style: italic">multi-line comment</span>.  It is <a href="#%28tech._invalid%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> to nest a <a href="#%28tech._multi._line._comment%29" class="techoutside" data-pltdoc="x"><span class="techinside">multi-line comment</span></a> within a <a href="#%28tech._multi._line._comment%29" class="techoutside" data-pltdoc="x"><span class="techinside">multi-line comment</span></a>.</p><h5>5.4.5<tt>&nbsp;</tt><a name="(part._.Reach_.App)"></a>Reach.App</h5><p><div class="highlight"><pre><span></span><span class="kd">export</span> <span class="kd">const</span> <span class="nx">main</span> <span class="o">=</span>
  <span class="nb">Reach</span><span class="p">.</span><span class="nb">App</span><span class="p">({},</span> <span class="p">[[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">displayResult</span><span class="o">:</span> <span class="nb">Fun</span><span class="p">(</span><span class="nx">Int</span><span class="p">,</span> <span class="nb">Null</span><span class="p">)}]],</span> <span class="p">(</span><span class="nx">A</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">A</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">interact</span><span class="p">.</span><span class="nx">displayResult</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span> <span class="p">})</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div>
</p><p><a name="(tech._reach..app)"></a><span style="font-style: italic">Reach.App</span> is a function which accepts three arguments:
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">options</span><span class="hspace"></span></span>,
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">participantDefinitions</span><span class="hspace"></span></span>,
and <span class="RktInBG"><span class="hspace"></span><span class="RktIn">program</span><span class="hspace"></span></span>.</p><p>The <span class="RktInBG"><span class="hspace"></span><span class="RktIn">options</span><span class="hspace"></span></span> argument is currently unused, but must be an object.</p><p>The <span class="RktInBG"><span class="hspace"></span><span class="RktIn">participantDefinitions</span><span class="hspace"></span></span> argument is an tuple of tuples.
Each tuple is a pair of
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">participantName</span><span class="hspace"></span></span>
and <span class="RktInBG"><span class="hspace"></span><span class="RktIn">participantInteractInterface</span><span class="hspace"></span></span>.
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">participantName</span><span class="hspace"></span></span> is a string which indicates the name of the participant function in the generated <a href="ref-model.html#%28tech._backend%29" class="techoutside" data-pltdoc="x"><span class="techinside">backend</span></a> code. Each <span class="RktInBG"><span class="hspace"></span><span class="RktIn">participantName</span><span class="hspace"></span></span> must be unique.
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">participantInteractInterface</span><span class="hspace"></span></span> is a <a name="(tech._participant._interact._interface)"></a><span style="font-style: italic">participant interact interface</span>, an object where each field indicates the type of a function or value which must be provided to the <a href="ref-model.html#%28tech._backend%29" class="techoutside" data-pltdoc="x"><span class="techinside">backend</span></a> by the <a href="ref-model.html#%28tech._frontend%29" class="techoutside" data-pltdoc="x"><span class="techinside">frontend</span></a> for <a href="ref-model.html#%28tech._interact%29" class="techoutside" data-pltdoc="x"><span class="techinside">interact</span></a>ing with the participant.</p><p>The <span class="RktInBG"><span class="hspace"></span><span class="RktIn">program</span><span class="hspace"></span></span> argument must be a syntactic <a href="#%28tech._arrow._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">arrow expression</span></a>.
The arguments to this arrow must match the number and order of <span class="RktInBG"><span class="hspace"></span><span class="RktIn">participantDefinitions</span><span class="hspace"></span></span>.
The function body is the program to be <a href="ref-model.html#%28tech._compile%29" class="techoutside" data-pltdoc="x"><span class="techinside">compile</span></a>d.
It specifies a <a href="ref-model.html#%28tech._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">step</span></a>.</p><h5>5.4.6<tt>&nbsp;</tt><a name="(part._.Types)"></a>Types</h5><p>Reach&rsquo;s <a name="(tech._type)"></a><span style="font-style: italic">type</span>s are:</p><ul><li><p><code class="highlight-inline"><span class="nb">Null</span></code>.</p></li><li><p><code class="highlight-inline"><span class="nb">Bool</span></code>, which denotes a boolean.</p></li><li><p><code class="highlight-inline"><span class="nb">UInt256</span></code>, which denotes an unsigned integer of 256 bits.</p></li><li><p><code class="highlight-inline"><span class="nb">Bytes</span></code>, which denotes a string of bytes.</p></li><li><p><code class="highlight-inline"><span class="nb">Address</span></code>, which denotes an <a href="ref-model.html#%28tech._account%29" class="techoutside" data-pltdoc="x"><span class="techinside">account</span></a> <a href="ref-model.html#%28tech._addres%29" class="techoutside" data-pltdoc="x"><span class="techinside">address</span></a>.</p></li><li><p><code class="highlight-inline"><span class="nb">Fun</span><span class="p">([</span><span class="nx">Domain_0</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">Domain_N</span><span class="p">],</span> <span class="nx">Range</span><span class="p">)</span></code>, which denotes a function type.</p></li><li><p><code class="highlight-inline"><span class="nb">Tuple</span><span class="p">(</span><span class="nx">Field_0</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">FieldN</span><span class="p">)</span></code>, which denotes a tuple.</p></li><li><p><code class="highlight-inline"><span class="nb">Obj</span><span class="p">({</span><span class="nx">key_0</span><span class="o">:</span> <span class="nx">Type_0</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">key_N</span><span class="o">:</span> <span class="nx">Type_N</span><span class="p">})</span></code>, which denotes an object.</p></li><li><p><code class="highlight-inline"><span class="nb">Array</span><span class="p">(</span><span class="nx">ElemenType</span><span class="p">,</span> <span class="nx">size</span><span class="p">)</span></code>, which denotes a statically-sized array.</p></li></ul><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>See <a href="guide-types.html" data-pltdoc="x">the guide section on types</a> to get some pointers about using types effectively in Reach.</p></blockquote></blockquote></blockquote><h5>5.4.7<tt>&nbsp;</tt><a name="(part._.Identifier_.Definitions)"></a>Identifier Definitions</h5><p>An <a name="(tech._identifier._definition)"></a><span style="font-style: italic">identifier definition</span> is either
a <a href="#%28tech._value._definition%29" class="techoutside" data-pltdoc="x"><span class="techinside">value definition</span></a>
or a <a href="#%28tech._function._definition%29" class="techoutside" data-pltdoc="x"><span class="techinside">function definition</span></a>.
Each of these introduces one or more <a name="(tech._bound._identifier)"></a><span style="font-style: italic">bound identifier</span>s.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">DELAY</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="kd">const</span> <span class="p">[</span> <span class="nx">Good</span><span class="p">,</span> <span class="nx">Bad</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">43</span> <span class="p">];</span> 
</pre></div>
</div></p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><a href="#%28tech._valid%29" class="techoutside" data-pltdoc="x"><span class="techinside">Valid</span></a> <a name="(tech._identifier)"></a><span style="font-style: italic">identifiers</span> follow the same rules as JavaScript identifiers:
they may consist of Unicode alphanumeric characters,
or <code class="highlight-inline"><span class="nx">_</span></code> or <code class="highlight-inline"><span class="nx">$</span></code>,
but may not begin with a digit.</p></blockquote></blockquote></blockquote><p>A <a name="(tech._value._definition)"></a><span style="font-style: italic">value definition</span> is written <code class="highlight-inline"><span class="kd">const</span> <span class="nx">LHS</span> <span class="o">=</span> <span class="nx">RHS</span><span class="p">;</span></code> where <code class="highlight-inline"><span class="nx">LHS</span></code> is either a single identifier, e.g. <code class="highlight-inline"><span class="nx">isDelicious</span></code>, or an tuple of identifiers, e.g. <code class="highlight-inline"><span class="p">[</span> <span class="nx">bestSushi</span><span class="p">,</span> <span class="nx">mediumestSushi</span><span class="p">,</span> <span class="nx">worstSushi</span> <span class="p">]</span></code>, and <code class="highlight-inline"><span class="nx">RHS</span></code> is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a>. If <code class="highlight-inline"><span class="nx">LHS</span></code> is a tuple, then <code class="highlight-inline"><span class="nx">RHS</span></code> must evaluate to a tuple with as many <a href="ref-model.html#%28tech._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">values</span></a> as there are identifiers in <code class="highlight-inline"><span class="nx">LHS</span></code>. Those <a href="ref-model.html#%28tech._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">values</span></a> are available as their corresponding <a href="#%28tech._bound._identifier%29" class="techoutside" data-pltdoc="x"><span class="techinside">bound identifier</span></a>s in the rest of the program.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">randomBool</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="k">interact</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span> <span class="p">};</span> 
</pre></div>
</div></p><p>A <a name="(tech._function._definition)"></a><span style="font-style: italic">function definition</span>, written <code class="highlight-inline"><span class="kd">function</span> <span class="nx">FUN</span><span class="p">(</span><span class="nx">ARG_0</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">ARG_n</span><span class="p">)</span> <span class="nx">BLOCK</span><span class="p">;</span></code>, defines <code class="highlight-inline"><span class="nx">FUN</span></code> as a function which abstracts its <a name="(tech._function._body)"></a><span style="font-style: italic">function body</span>, the <a href="#%28tech._block%29" class="techoutside" data-pltdoc="x"><span class="techinside">block</span></a> <code class="highlight-inline"><span class="nx">BLOCK</span></code>, over the identifiers <code class="highlight-inline"><span class="nx">ARG_0</span></code> through <code class="highlight-inline"><span class="nx">ARG_n</span></code>.</p><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p>All identifiers in Reach programs must be <a name="(tech._unbound)"></a><span style="font-style: italic">unbound</span>
at the position of the program where they are bound,
i.e., it is <a href="#%28tech._invalid%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> to shadow identifiers with new definitions.
For example,</p><p><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> 
</pre></div>
</p><p>is <a href="#%28tech._invalid%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a>.
This restriction is independent of whether a binding is
only known to a single <a href="ref-model.html#%28tech._participant%29" class="techoutside" data-pltdoc="x"><span class="techinside">participant</span></a>. For example,</p><p><div class="highlight"><pre><span></span><span class="nx">Alice</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="p">});</span>
<span class="nx">Bob</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="p">});</span> 
</pre></div>
</p><p>is <a href="#%28tech._invalid%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a>.</p><p>The special identifier <code class="highlight-inline"><span class="nx">_</span></code> is an exception to this rule.
The <code class="highlight-inline"><span class="nx">_</span></code> binding is always considered to be unbound.
This means means that <code class="highlight-inline"><span class="nx">_</span></code> is both
an identifier that can never be read,
as well as an identifier that may be bound many times.
This may be useful for ignoring unwanted values, for example:</p><p><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="p">[</span><span class="nx">_</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">_</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
</pre></div>
</p><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p>Top-level <a href="#%28tech._identifier._definition%29" class="techoutside" data-pltdoc="x"><span class="techinside">identifier definitions</span></a> may be <a name="(tech._export)"></a><span style="font-style: italic">export</span>ed
by writing <span class="RktInBG"><span class="hspace"></span><span class="RktIn">export const</span><span class="hspace"></span></span> in place of <span class="RktInBG"><span class="hspace"></span><span class="RktIn">const</span><span class="hspace"></span></span>.
An <a href="#%28tech._export%29" class="techoutside" data-pltdoc="x"><span class="techinside">export</span></a>ed identifier in a given <a href="#%28tech._module%29" class="techoutside" data-pltdoc="x"><span class="techinside">module</span></a> may be <a href="#%28tech._import%29" class="techoutside" data-pltdoc="x"><span class="techinside">import</span></a>ed by other <a href="#%28tech._module%29" class="techoutside" data-pltdoc="x"><span class="techinside">modules</span></a>.</p><h5>5.4.8<tt>&nbsp;</tt><a name="(part._.Security_levels_and_scope)"></a>Security levels and scope</h5><p>The text of Reach program is <a href="ref-model.html#%28tech._public%29" class="techoutside" data-pltdoc="x"><span class="techinside">public</span></a> knowledge to all <a href="ref-model.html#%28tech._participant%29" class="techoutside" data-pltdoc="x"><span class="techinside">participants</span></a>.
However, any value that comes from an <a href="#%28tech._interaction._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">interaction expression</span></a> is a <a name="(tech._secret)"></a><span style="font-style: italic">secret</span> which only that participant knows.
Furthermore, any values derived from <a href="#%28tech._secret%29" class="techoutside" data-pltdoc="x"><span class="techinside">secret</span></a> values are also <a href="#%28tech._secret%29" class="techoutside" data-pltdoc="x"><span class="techinside">secret</span></a>.
A value, X, is considered derived from another, Y, if the value of Y is provided to a primitive operation to arrive at X, or if Y is used as part of a conditional that influences the definition of X.
<a href="#%28tech._secret%29" class="techoutside" data-pltdoc="x"><span class="techinside">Secrets</span></a> can only be made <a href="ref-model.html#%28tech._public%29" class="techoutside" data-pltdoc="x"><span class="techinside">public</span></a> by using the <a href="#%28tech._declassify%29" class="techoutside" data-pltdoc="x"><span class="techinside">declassify</span></a> primitive.</p><p>When <a href="#%28tech._secret%29" class="techoutside" data-pltdoc="x"><span class="techinside">secret</span></a> values are bound to an <a href="#%28tech._identifier%29" class="techoutside" data-pltdoc="x"><span class="techinside">identifier</span></a>
within a <a href="ref-model.html#%28tech._local._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">local step</span></a>,
the identifier name MUST be prefixed by an underscore (<code class="highlight-inline"><span class="nx">_</span></code>).</p><p>When <a href="ref-model.html#%28tech._public%29" class="techoutside" data-pltdoc="x"><span class="techinside">public</span></a> values are bound to an <a href="#%28tech._identifier%29" class="techoutside" data-pltdoc="x"><span class="techinside">identifier</span></a>,
regardless of context,
the identifier name MUST NOT be prefixed by an underscore (<code class="highlight-inline"><span class="nx">_</span></code>).</p><p>Consequently, identifiers which appear inside of a
<a href="#%28tech._function._definition%29" class="techoutside" data-pltdoc="x"><span class="techinside">function definition</span></a> or <a href="#%28tech._arrow._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">arrow expression</span></a>
MAY be prefixed by an underscore.
This will cause a compiler error if any value bound to that
identifier is public.</p><h5>5.4.9<tt>&nbsp;</tt><a name="(part._.Blocks)"></a>Blocks</h5><p><div class="highlight"><pre><span></span><span class="p">{</span> <span class="k">return</span> <span class="mi">42</span><span class="p">;</span> <span class="p">}</span>
<span class="p">{</span> <span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">31</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">11</span><span class="p">;</span> <span class="p">}</span>
<span class="p">{</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">y</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">&quot;Why&quot;</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">&quot;Ecks&quot;</span><span class="p">;</span> <span class="p">}</span> <span class="p">}</span> 
</pre></div>
</p><p>A <a name="(tech._block)"></a><span style="font-style: italic">block</span> is a sequence of <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statements</span></a> surrounded by braces, i.e. <span class="RktInBG"><span class="hspace"></span><span class="RktIn">{</span><span class="hspace"></span></span> and <span class="RktInBG"><span class="hspace"></span><span class="RktIn">}</span><span class="hspace"></span></span>.</p><h5>5.4.10<tt>&nbsp;</tt><a name="(part._.Statements)"></a>Statements</h5><p>There are a large variety of different <a name="(tech._statement)"></a><span style="font-style: italic">statements</span> in Reach programs.</p><p>Each <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a> affects the meaning of the subsequent <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statements</span></a>, which is called its <a name="(tech._tail)"></a><span style="font-style: italic">tail</span>. For example, if <code class="highlight-inline"><span class="p">{</span><span class="nx">X</span><span class="p">;</span> <span class="nx">Y</span><span class="p">;</span> <span class="nx">Z</span><span class="p">;}</span></code> is a <a href="#%28tech._block%29" class="techoutside" data-pltdoc="x"><span class="techinside">block</span></a>, then <code class="highlight-inline"><span class="nx">X</span></code>&rsquo;s <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a> is <code class="highlight-inline"><span class="p">{</span><span class="nx">Y</span><span class="p">;</span> <span class="nx">Z</span><span class="p">;}</span></code> and <code class="highlight-inline"><span class="nx">Y</span></code>&rsquo;s <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a> is <code class="highlight-inline"><span class="p">{</span><span class="nx">Z</span><span class="p">;}</span></code>.</p><p>Distinct from <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tails</span></a> are <a name="(tech._continuation)"></a><span style="font-style: italic">continuations</span> which include everything after the <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a>. For example, in <code class="highlight-inline"><span class="p">{{</span><span class="nx">X</span><span class="p">;</span> <span class="nx">Y</span><span class="p">;};</span> <span class="nx">Z</span><span class="p">;}</span></code>, <code class="highlight-inline"><span class="nx">X</span></code>&rsquo;s <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a> is just <code class="highlight-inline"><span class="nx">Y</span></code>, but its <a href="#%28tech._continuation%29" class="techoutside" data-pltdoc="x"><span class="techinside">continuation</span></a> is <code class="highlight-inline"><span class="p">{</span><span class="nx">Y</span><span class="p">;};</span> <span class="nx">Z</span><span class="p">;</span></code>.</p><p><a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">Tails</span></a> are statically apparent from the structure of the program source code, while <a href="#%28tech._continuation%29" class="techoutside" data-pltdoc="x"><span class="techinside">continuations</span></a> are influenced by function calls.</p><p>A sequence of <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statements</span></a> that does not end in a <a name="(tech._terminator._statement)"></a><span style="font-style: italic">terminator statement</span> (a <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a> with no <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a>), such as a <a href="#%28tech._return._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">return statement</span></a>, <a href="#%28tech._continue._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">continue statement</span></a>, or <a href="#%28tech._exit._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">exit statement</span></a> is treated as if it ended with <code class="highlight-inline"><span class="k">return</span> <span class="kc">null</span><span class="p">;</span></code>.</p><p>The remainder of this section enumerates each kind of <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a>.</p><h5>5.4.10.1<tt>&nbsp;</tt><a name="(part._.Exit_statements)"></a>Exit statements</h5><p><div class="highlight"><pre><span></span><span class="k">exit</span><span class="p">();</span> 
</pre></div>
</p><p>An <a name="(tech._exit._statement)"></a><span style="font-style: italic">exit statement</span>, written <code class="highlight-inline"><span class="k">exit</span><span class="p">();</span></code>, halts the computation.
It is a <a href="#%28tech._terminator._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">terminator statement</span></a>, so it must have an empty <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a>.
It may only occur in a <a href="ref-model.html#%28tech._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">step</span></a>.</p><h5>5.4.10.2<tt>&nbsp;</tt><a name="(part._.Return_statements)"></a>Return statements</h5><p><div class="highlight"><pre><span></span><span class="k">return</span> <span class="mi">17</span><span class="p">;</span>
<span class="k">return</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span><span class="p">;</span>
<span class="k">return</span> <span class="nx">f</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="k">return</span><span class="p">;</span> 
</pre></div>
</p><p>A <a name="(tech._return._statement)"></a><span style="font-style: italic">return statement</span>, written <code class="highlight-inline"><span class="k">return</span> <span class="nx">EXPR</span><span class="p">;</span></code>, where <code class="highlight-inline"><span class="nx">EXPR</span></code> is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> evaluates to the same <a href="ref-model.html#%28tech._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">value</span></a> as <code class="highlight-inline"><span class="nx">EXPR</span></code>.
As a special case, <code class="highlight-inline"><span class="k">return</span><span class="p">;</span></code> is interpreted the same as <code class="highlight-inline"><span class="k">return</span> <span class="kc">null</span><span class="p">;</span></code>.</p><p>A <a href="#%28tech._return._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">return statement</span></a> returns its value to the surrounding function application.</p><p>A <a href="#%28tech._return._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">return statement</span></a> is a <a href="#%28tech._terminator._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">terminator statement</span></a>, so it must have an empty <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a>. For example,</p><p><div class="highlight"><pre><span></span><span class="p">{</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span> 
</pre></div>
</p><p>is <a href="#%28tech._invalid%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a>, because the first <code class="highlight-inline"><span class="k">return</span></code>&rsquo;s <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a> is not empty.</p><h5>5.4.10.3<tt>&nbsp;</tt><a name="(part._.Identifier_definition_statements)"></a>Identifier definition statements</h5><p>If a <a href="#%28tech._value._definition%29" class="techoutside" data-pltdoc="x"><span class="techinside">value definition</span></a> or <a href="#%28tech._function._definition%29" class="techoutside" data-pltdoc="x"><span class="techinside">function definition</span></a> occurs in a <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a> position, then the identifiers are bound in the <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a>&rsquo;s <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a>. For example,</p><p><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="p">[</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span> <span class="p">];</span>
<span class="kd">const</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
<span class="k">return</span> <span class="nx">z</span><span class="p">;</span> 
</pre></div>
</p><p>evaluates to <code class="highlight-inline"><span class="mi">7</span></code>. And,</p><p><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="p">};</span>
<span class="k">return</span> <span class="nx">f</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> 
</pre></div>
</p><p>evaluates to <code class="highlight-inline"><span class="mi">2</span></code>.</p><h5>5.4.10.4<tt>&nbsp;</tt><a name="(part._.Conditional_statements)"></a>Conditional statements</h5><p><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">&quot;Yes!&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">&quot;No, waaah!&quot;</span><span class="p">;</span> <span class="p">}</span> 
</pre></div>
</p><p>A <a name="(tech._conditional._statement)"></a><span style="font-style: italic">conditional statement</span>,
written <code class="highlight-inline"><span class="k">if</span> <span class="p">(</span><span class="nx">COND</span><span class="p">)</span> <span class="nx">TRUE</span> <span class="k">else</span> <span class="nx">FALSE</span></code>,
where <code class="highlight-inline"><span class="nx">COND</span></code> is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> which evaluates to a boolean
and <code class="highlight-inline"><span class="nx">TRUE</span></code> and <code class="highlight-inline"><span class="nx">FALSE</span></code> as <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statements</span></a>
(potentially <a href="#%28tech._block._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">block statements</span></a>),
selects between the <code class="highlight-inline"><span class="nx">TRUE</span></code> <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a> and <code class="highlight-inline"><span class="nx">FALSE</span></code> <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a> based on whether <code class="highlight-inline"><span class="nx">COND</span></code> evaluates to <code class="highlight-inline"><span class="kc">true</span></code>.</p><p>Both <code class="highlight-inline"><span class="nx">TRUE</span></code> and <code class="highlight-inline"><span class="nx">FALSE</span></code> have empty <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tails</span></a>, i.e. the <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a> of the <a href="#%28tech._conditional._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">conditional statement</span></a> is not propagated. For example,</p><p><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">y</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">z</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">z</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="p">}</span>
<span class="k">return</span> <span class="nx">z</span><span class="p">;</span> 
</pre></div>
</p><p>is erroneous, because the identifier <code class="highlight-inline"><span class="nx">z</span></code> is not bound outside the <a href="#%28tech._conditional._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">conditional statement</span></a>.</p><p>A <a href="#%28tech._conditional._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">conditional statement</span></a> may only include a <a href="ref-model.html#%28tech._consensus._transfer%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus transfer</span></a> in <code class="highlight-inline"><span class="nx">TRUE</span></code> or <code class="highlight-inline"><span class="nx">FALSE</span></code> if it is within a <a href="ref-model.html#%28tech._consensus._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus step</span></a>.</p><h5>5.4.10.5<tt>&nbsp;</tt><a name="(part._.Block_statements)"></a>Block statements</h5><p>A <a name="(tech._block._statement)"></a><span style="font-style: italic">block statement</span> is when a <a href="#%28tech._block%29" class="techoutside" data-pltdoc="x"><span class="techinside">block</span></a> occurs in a <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a> position, then it establishes a local, separate scope for the definitions of identifiers within that <a href="#%28tech._block%29" class="techoutside" data-pltdoc="x"><span class="techinside">block</span></a>. In other words, the <a href="#%28tech._block%29" class="techoutside" data-pltdoc="x"><span class="techinside">block</span></a> is evaluated for effect, but the <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a> of the <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statements</span></a> within the <a href="#%28tech._block%29" class="techoutside" data-pltdoc="x"><span class="techinside">block</span></a> are isolated from the surrounding <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a>. For example,</p><p><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="k">return</span> <span class="nx">x</span><span class="p">;</span> 
</pre></div>
</p><p>evaluates to <code class="highlight-inline"><span class="mi">4</span></code>, but</p><p><div class="highlight"><pre><span></span><span class="p">{</span> <span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="p">}</span>
<span class="k">return</span> <span class="nx">x</span><span class="p">;</span> 
</pre></div>
</p><p>is erroneous, because the identifier <code class="highlight-inline"><span class="nx">x</span></code> is not bound outside the <a href="#%28tech._block._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">block statement</span></a>.</p><h5>5.4.10.6<tt>&nbsp;</tt><a name="(part._.Expression_statements)"></a>Expression statements</h5><p><div class="highlight"><pre><span></span><span class="mi">4</span><span class="p">;</span>
<span class="nx">f</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span> 
</pre></div>
</p><p>An <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a>, <code class="highlight-inline"><span class="nx">E</span></code>, in a <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a> position is equivalent to the <a href="#%28tech._block._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">block statement</span></a> <code class="highlight-inline"><span class="p">{</span> <span class="k">return</span> <span class="nx">E</span><span class="p">;</span> <span class="p">}</span></code>.</p><h5>5.4.10.7<tt>&nbsp;</tt><a name="(part._.Local_step)"></a>Local step</h5><p><div class="highlight"><pre><span></span><span class="nx">Alice</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">pretzel</span> <span class="o">=</span> <span class="k">interact</span><span class="p">.</span><span class="nx">random</span><span class="p">();</span> <span class="p">});</span> 
</pre></div>
</p><p>A <a href="ref-model.html#%28tech._local._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">local step</span></a> statement is written <code class="highlight-inline"><span class="nx">PART</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="nx">BLOCK</span><span class="p">)</span></code>, where <code class="highlight-inline"><span class="nx">PART</span></code> is a <a href="ref-model.html#%28tech._participant%29" class="techoutside" data-pltdoc="x"><span class="techinside">participant</span></a> identifier and <code class="highlight-inline"><span class="nx">BLOCK</span></code> is a <a href="#%28tech._block%29" class="techoutside" data-pltdoc="x"><span class="techinside">block</span></a>. Any bindings defined within the <a href="#%28tech._block%29" class="techoutside" data-pltdoc="x"><span class="techinside">block</span></a> of a <a href="ref-model.html#%28tech._local._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">local step</span></a> are available in the <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a>&rsquo;s <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a> as new <a href="ref-model.html#%28tech._local._state%29" class="techoutside" data-pltdoc="x"><span class="techinside">local state</span></a>. For example,</p><p><div class="highlight"><pre><span></span><span class="nx">Alice</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="p">});</span>
<span class="nx">Alice</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="p">});</span> 
</pre></div>
</p><p>is a <a href="#%28tech._valid%29" class="techoutside" data-pltdoc="x"><span class="techinside">valid</span></a> program where <code class="highlight-inline"><span class="nx">Alice</span></code>&rsquo;s <a href="ref-model.html#%28tech._local._state%29" class="techoutside" data-pltdoc="x"><span class="techinside">local state</span></a> includes the <a href="ref-model.html#%28tech._private%29" class="techoutside" data-pltdoc="x"><span class="techinside">private</span></a> values <code class="highlight-inline"><span class="nx">x</span></code> (bound to <code class="highlight-inline"><span class="mi">3</span></code>) and <code class="highlight-inline"><span class="nx">y</span></code> (bound to <code class="highlight-inline"><span class="mi">4</span></code>). However, such bindings are <span class="emph">not</span> <a href="ref-model.html#%28tech._consensus._state%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus state</span></a>, so they are purely <a href="ref-model.html#%28tech._local._state%29" class="techoutside" data-pltdoc="x"><span class="techinside">local state</span></a>. For example,</p><p><div class="highlight"><pre><span></span><span class="nx">Alice</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="p">});</span>
<span class="nx">Bob</span><span class="p">.</span><span class="k">only</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="p">});</span> 
</pre></div>
</p><p>is an <a href="#%28tech._invalid%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> program, because <code class="highlight-inline"><span class="nx">Bob</span></code> does not know <code class="highlight-inline"><span class="nx">x</span></code>.</p><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p><div class="highlight"><pre><span></span><span class="nx">each</span><span class="p">([</span><span class="nx">Alice</span><span class="p">,</span> <span class="nx">Bob</span><span class="p">],</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">pretzel</span> <span class="o">=</span> <span class="k">interact</span><span class="p">.</span><span class="nx">random</span><span class="p">();</span> <span class="p">});</span> 
</pre></div>
</p><p>An <a name="(tech._each)"></a><span style="font-style: italic">each</span> <a href="ref-model.html#%28tech._local._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">local step</span></a> statement can be written as <code class="highlight-inline"><span class="nx">each</span><span class="p">(</span><span class="nx">PART_TUPLE</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">BLOCK</span><span class="p">)</span></code>, where <code class="highlight-inline"><span class="nx">PART_TUPLE</span></code> is a tuple of <a href="ref-model.html#%28tech._participant%29" class="techoutside" data-pltdoc="x"><span class="techinside">participants</span></a> and <code class="highlight-inline"><span class="nx">BLOCK</span></code> is a <a href="#%28tech._block%29" class="techoutside" data-pltdoc="x"><span class="techinside">block</span></a>.
It is an abbreviation of many <a href="ref-model.html#%28tech._local._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">local step</span></a> statements that could have been written with <code class="highlight-inline"><span class="k">only</span></code>.</p><h5>5.4.10.8<tt>&nbsp;</tt><a name="(part._.Consensus_transfers)"></a>Consensus transfers</h5><p><div class="highlight"><pre><span></span><span class="nx">Alice</span><span class="p">.</span><span class="k">publish</span><span class="p">(</span><span class="nx">wagerAmount</span><span class="p">)</span>
     <span class="p">.</span><span class="k">pay</span><span class="p">(</span><span class="nx">wagerAmount</span><span class="p">)</span>
     <span class="p">.</span><span class="k">timeout</span><span class="p">(</span><span class="nx">DELAY</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
       <span class="nx">Bob</span><span class="p">.</span><span class="k">publish</span><span class="p">();</span>
       <span class="k">commit</span><span class="p">();</span>
       <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">});</span> 
</pre></div>

<div class="highlight"><pre><span></span><span class="nx">Alice</span><span class="p">.</span><span class="k">publish</span><span class="p">(</span><span class="nx">wagerAmount</span><span class="p">)</span>
     <span class="p">.</span><span class="k">pay</span><span class="p">(</span><span class="nx">wagerAmount</span><span class="p">)</span>
     <span class="p">.</span><span class="k">timeout</span><span class="p">(</span><span class="nx">DELAY</span><span class="p">,</span> <span class="nb">closeTo</span><span class="p">(</span><span class="nx">Bob</span><span class="p">,</span> <span class="kc">false</span><span class="p">));</span> 
</pre></div>
</p><p>A <a href="ref-model.html#%28tech._consensus._transfer%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus transfer</span></a> is written <code class="highlight-inline"><span class="nx">PART</span><span class="p">.</span><span class="k">publish</span><span class="p">(</span><span class="nx">ID_0</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">ID_n</span><span class="p">).</span><span class="k">pay</span><span class="p">(</span><span class="nx">PAY_EXPR</span><span class="p">).</span><span class="k">timeout</span><span class="p">(</span><span class="nx">DELAY_EXPR</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">TIMEOUT_BLOCK</span><span class="p">)</span></code>, where <code class="highlight-inline"><span class="nx">PART</span></code> is a <a href="ref-model.html#%28tech._participant%29" class="techoutside" data-pltdoc="x"><span class="techinside">participant</span></a> identifier, <code class="highlight-inline"><span class="nx">ID_0</span></code> through <code class="highlight-inline"><span class="nx">ID_n</span></code> are identifiers for <code class="highlight-inline"><span class="nx">PART</span></code>&rsquo;s <a href="ref-model.html#%28tech._public%29" class="techoutside" data-pltdoc="x"><span class="techinside">public</span></a> <a href="ref-model.html#%28tech._local._state%29" class="techoutside" data-pltdoc="x"><span class="techinside">local state</span></a>, <code class="highlight-inline"><span class="nx">PAY_EXPR</span></code> is a <a href="ref-model.html#%28tech._public%29" class="techoutside" data-pltdoc="x"><span class="techinside">public</span></a> <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> evaluating to an amount of <a href="ref-model.html#%28tech._network._token%29" class="techoutside" data-pltdoc="x"><span class="techinside">network tokens</span></a>, <code class="highlight-inline"><span class="nx">DELAY_EXPR</span></code> is a <a href="ref-model.html#%28tech._public%29" class="techoutside" data-pltdoc="x"><span class="techinside">public</span></a> <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> that depends on only <a href="ref-model.html#%28tech._consensus._state%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus state</span></a> and evaluates to a <a href="ref-model.html#%28tech._time._delta%29" class="techoutside" data-pltdoc="x"><span class="techinside">time delta</span></a> represented by a natural number, <code class="highlight-inline"><span class="nx">TIMEOUT_BLOCK</span></code> is a <a href="ref-model.html#%28tech._timeout%29" class="techoutside" data-pltdoc="x"><span class="techinside">timeout</span></a> <a href="#%28tech._block%29" class="techoutside" data-pltdoc="x"><span class="techinside">block</span></a>, which will be executed after <code class="highlight-inline"><span class="nx">DELAY_EXPR</span></code> units of <a href="ref-model.html#%28tech._time%29" class="techoutside" data-pltdoc="x"><span class="techinside">time</span></a> have passed from the end of the last <a href="ref-model.html#%28tech._consensus._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus step</span></a> without <code class="highlight-inline"><span class="nx">PART</span></code> executing this <a href="ref-model.html#%28tech._consensus._transfer%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus transfer</span></a>. The <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a> of a <a href="ref-model.html#%28tech._consensus._transfer%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus transfer</span></a> <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a> is a <a href="ref-model.html#%28tech._consensus._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus step</span></a>, which is finalized with a <a href="#%28tech._commit._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">commit statement</span></a>, which must occur in the <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a>.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>See <a href="guide-timeout.html" data-pltdoc="x">the guide section on non-participation</a> to undertand when to use timeouts and how to use them most effectively.</p></blockquote></blockquote></blockquote><p>The <code class="highlight-inline"><span class="k">publish</span></code> component exclusive-or the <code class="highlight-inline"><span class="k">pay</span></code> component may be omitted, if either there is no <a href="ref-model.html#%28tech._publication%29" class="techoutside" data-pltdoc="x"><span class="techinside">publication</span></a> or no <a href="ref-model.html#%28tech._transfer%29" class="techoutside" data-pltdoc="x"><span class="techinside">transfer</span></a> of <a href="ref-model.html#%28tech._network._token%29" class="techoutside" data-pltdoc="x"><span class="techinside">network tokens</span></a> to accompany this <a href="ref-model.html#%28tech._consensus._transfer%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus transfer</span></a>. The <code class="highlight-inline"><span class="k">timeout</span></code> component may always be omitted. Each component may occur any order. For example, the following are all <a href="#%28tech._valid%29" class="techoutside" data-pltdoc="x"><span class="techinside">valid</span></a>:</p><p><div class="highlight"><pre><span></span><span class="nx">Alice</span><span class="p">.</span><span class="k">publish</span><span class="p">(</span><span class="nx">coinFlip</span><span class="p">);</span>

<span class="nx">Alice</span><span class="p">.</span><span class="k">pay</span><span class="p">(</span><span class="nx">penaltyAmount</span><span class="p">);</span>

<span class="nx">Alice</span><span class="p">.</span><span class="k">pay</span><span class="p">(</span><span class="nx">penaltyAmount</span><span class="p">).</span><span class="k">publish</span><span class="p">(</span><span class="nx">coinFlip</span><span class="p">);</span>

<span class="nx">Alice</span><span class="p">.</span><span class="k">publish</span><span class="p">(</span><span class="nx">coinFlip</span><span class="p">)</span>
     <span class="p">.</span><span class="k">timeout</span><span class="p">(</span><span class="nx">DELAY</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nb">closeTo</span><span class="p">(</span><span class="nx">Bob</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="k">exit</span><span class="p">()));</span>

<span class="nx">Alice</span><span class="p">.</span><span class="k">pay</span><span class="p">(</span><span class="nx">penaltyAmount</span><span class="p">)</span>
     <span class="p">.</span><span class="k">timeout</span><span class="p">(</span><span class="nx">DELAY</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
       <span class="nx">Bob</span><span class="p">.</span><span class="k">publish</span><span class="p">();</span>
       <span class="k">commit</span><span class="p">();</span>
       <span class="k">exit</span><span class="p">();</span> <span class="p">});</span> 
</pre></div>
</p><h5>5.4.10.9<tt>&nbsp;</tt><a name="(part._.Commit_statements)"></a>Commit statements</h5><p><div class="highlight"><pre><span></span><span class="k">commit</span><span class="p">();</span> 
</pre></div>
</p><p>A <a name="(tech._commit._statement)"></a><span style="font-style: italic">commit statement</span>, written <code class="highlight-inline"><span class="k">commit</span><span class="p">();</span></code>, <a href="ref-model.html#%28tech._commit%29" class="techoutside" data-pltdoc="x"><span class="techinside">commits</span></a> to <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a>&rsquo;s <a href="#%28tech._continuation%29" class="techoutside" data-pltdoc="x"><span class="techinside">continuation</span></a> as the next <a href="ref-model.html#%28tech._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">step</span></a> of the <a href="ref-model.html#%28tech._dapp%29" class="techoutside" data-pltdoc="x"><span class="techinside">DApp</span></a> computation. In other words, it ends the current <a href="ref-model.html#%28tech._consensus._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus step</span></a> and allows more <a href="ref-model.html#%28tech._local._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">local steps</span></a>.</p><h5>5.4.10.10<tt>&nbsp;</tt><a name="(part._.While_statements)"></a>While statements</h5><p><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="p">[</span> <span class="nx">heap1</span><span class="p">,</span> <span class="nx">heap2</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">21</span> <span class="p">];</span>
<span class="k">invariant</span><span class="p">(</span><span class="nb">balance</span><span class="p">()</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">wagerAmount</span><span class="p">);</span>
<span class="k">while</span> <span class="p">(</span> <span class="nx">heap1</span> <span class="o">+</span> <span class="nx">heap2</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
  <span class="p">....</span>
  <span class="p">[</span> <span class="nx">heap1</span><span class="p">,</span> <span class="nx">heap2</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">heap1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">heap2</span> <span class="p">];</span>
  <span class="k">continue</span><span class="p">;</span> <span class="p">}</span> 
</pre></div>
</p><p>A <a name="(tech._while._statement)"></a><span style="font-style: italic">while statement</span> may occur within a <a href="ref-model.html#%28tech._consensus._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus step</span></a> and is written:</p><p><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">LHS</span> <span class="o">=</span> <span class="nx">INIT_EXPR</span><span class="p">;</span>
<span class="k">invariant</span><span class="p">(</span><span class="nx">INVARIANT_EXPR</span><span class="p">);</span>
<span class="k">while</span><span class="p">(</span> <span class="nx">COND_EXPR</span> <span class="p">)</span> <span class="nx">BLOCK</span> 
</pre></div>
</p><p>where <code class="highlight-inline"><span class="nx">LHS</span></code> is a valid left-hand side of an <a href="#%28tech._identifier._definition%29" class="techoutside" data-pltdoc="x"><span class="techinside">identifier definition</span></a> where the <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> <code class="highlight-inline"><span class="nx">INIT_EXPR</span></code> is the right-hand side, and <code class="highlight-inline"><span class="nx">INVARIANT_EXPR</span></code> is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a>, called the <a name="(tech._loop._invariant)"></a><span style="font-style: italic">loop invariant</span>, that must be true before and after every execution of the <a href="#%28tech._block%29" class="techoutside" data-pltdoc="x"><span class="techinside">block</span></a> <code class="highlight-inline"><span class="nx">BLOCK</span></code>, and if <code class="highlight-inline"><span class="nx">COND_EXPR</span></code> is true, then the <a href="#%28tech._block%29" class="techoutside" data-pltdoc="x"><span class="techinside">block</span></a> executes, and if not, then the loop terminates and control transfers to the <a href="#%28tech._continuation%29" class="techoutside" data-pltdoc="x"><span class="techinside">continuation</span></a> of the <a href="#%28tech._while._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">while statement</span></a>. The identifiers bound by <code class="highlight-inline"><span class="nx">LHS</span></code> are bound within <code class="highlight-inline"><span class="nx">INVARIANT_EXPR</span></code>, <code class="highlight-inline"><span class="nx">COND_EXPR</span></code>, <code class="highlight-inline"><span class="nx">BLOCK</span></code>, and the <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a> of the <a href="#%28tech._while._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">while statement</span></a>.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Read about finding <a href="guide-loop-invs.html" data-pltdoc="x">loop invariants</a> in the Reach guide.</p></blockquote></blockquote></blockquote><h5>5.4.10.11<tt>&nbsp;</tt><a name="(part._.Continue_statements)"></a>Continue statements</h5><p><div class="highlight"><pre><span></span><span class="p">[</span> <span class="nx">heap1</span><span class="p">,</span> <span class="nx">heap2</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">heap1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">heap2</span> <span class="p">];</span>
<span class="k">continue</span><span class="p">;</span> 
</pre></div>
</p><p>A <a name="(tech._continue._statement)"></a><span style="font-style: italic">continue statement</span> may occur within a <a href="#%28tech._while._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">while statement</span></a>&rsquo;s <a href="#%28tech._block%29" class="techoutside" data-pltdoc="x"><span class="techinside">block</span></a> and is written:</p><p><div class="highlight"><pre><span></span><span class="nx">LHS</span> <span class="o">=</span> <span class="nx">UPDATE_EXPR</span><span class="p">;</span>
<span class="k">continue</span><span class="p">;</span> 
</pre></div>
</p><p>where the identifiers bound by <code class="highlight-inline"><span class="nx">LHS</span></code> are a subset of the variables bound by the nearest enclosing <a href="#%28tech._while._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">while statement</span></a> and <code class="highlight-inline"><span class="nx">UPDATE_EXPR</span></code> is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> which may be bound by <code class="highlight-inline"><span class="nx">LHS</span></code>.</p><p>A <a href="#%28tech._continue._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">continue statement</span></a> is a <a href="#%28tech._terminator._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">terminator statement</span></a>, so it must have an empty <a href="#%28tech._tail%29" class="techoutside" data-pltdoc="x"><span class="techinside">tail</span></a>.</p><p>A <a href="#%28tech._continue._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">continue statement</span></a> may be written without the preceding identifier update, which is equivalent to writing</p><p><div class="highlight"><pre><span></span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">continue</span><span class="p">;</span> 
</pre></div>
</p><h5>5.4.11<tt>&nbsp;</tt><a name="(part._.Expressions)"></a>Expressions</h5><p>There are a large variety of different <a name="(tech._expression)"></a><span style="font-style: italic">expressions</span> in Reach programs.</p><p>The remainder of this section enumerates each kind of <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nx">X</span>
<span class="nx">Y</span>
<span class="nx">Z</span> 
</pre></div>
</div></p><p>An identifier, written <code class="highlight-inline"><span class="nx">ID</span></code>, is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> that evaluates to the value of the <a href="#%28tech._bound._identifier%29" class="techoutside" data-pltdoc="x"><span class="techinside">bound identifier</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="mi">10</span>
<span class="mh">0xdeadbeef</span>
<span class="mi">007</span>
<span class="kc">true</span>
<span class="kc">false</span>
<span class="s2">&quot;reality bytes&quot;</span>
<span class="s1">&#39;it just does&#39;</span> 
</pre></div>
</div></p><p>A <a name="(tech._literal._value)"></a><span style="font-style: italic">literal value</span>,
written <code class="highlight-inline"><span class="nx">VALUE</span></code>,
is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> that evaluates to the given <a href="ref-model.html#%28tech._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">value</span></a>.
<a name="(tech._numeric._literal)"></a><span style="font-style: italic">Numeric literal</span>s may be written in decimal, hexadecimal, or octal.
<a name="(tech._boolean._literal)"></a><span style="font-style: italic">Boolean literal</span>s may be written as <code class="highlight-inline"><span class="kc">true</span></code> or <code class="highlight-inline"><span class="kc">false</span></code>.
<a name="(tech._string._literal)"></a><span style="font-style: italic">String literal</span>s (aka byte strings)
may be written between double or single quotes
(with no distinction between the different styles)
and use the same escaping rules as JavaScript.</p><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p>An <a name="(tech._operator)"></a><span style="font-style: italic">operator</span> is a special identifier,
which is either a <a href="#%28tech._unary._operator%29" class="techoutside" data-pltdoc="x"><span class="techinside">unary operator</span></a>, or a <a href="#%28tech._binary._operator%29" class="techoutside" data-pltdoc="x"><span class="techinside">binary operator</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="o">!</span> <span class="nx">a</span>
<span class="o">-</span> <span class="nx">a</span>
<span class="k">typeof</span> <span class="nx">a</span>
</pre></div>
</div></p><p>A <a name="(tech._unary._expression)"></a><span style="font-style: italic">unary expression</span>, written <code class="highlight-inline"><span class="nx">UNAOP</span> <span class="nx">EXPR_rhs</span></code>, where <code class="highlight-inline"><span class="nx">EXPR_rhs</span></code> is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> and <code class="highlight-inline"><span class="nx">UNAOP</span></code> is one of the <a name="(tech._unary._operator)"></a><span style="font-style: italic">unary operator</span>s: <span class="RktInBG"><span class="hspace"></span><span class="RktIn">! - typeof</span><span class="hspace"></span></span>.</p><p>It is <a href="#%28tech._invalid%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> to use unary operations on the wrong types of <a href="ref-model.html#%28tech._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">values</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">||</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">/</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">%</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">|</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">&amp;</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">^</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">&lt;&lt;</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">&gt;&gt;</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">!=</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">!==</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">&gt;</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">&gt;=</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">&lt;=</span> <span class="nx">b</span>
<span class="nx">a</span> <span class="o">&lt;</span> <span class="nx">b</span> 
</pre></div>
</div></p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Bitwise operations are not supported by all <a href="ref-model.html#%28tech._consensus._network%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus networks</span></a> and greatly decrease the efficiency of verification.</p></blockquote></blockquote></blockquote><p>A <a name="(tech._binary._expression)"></a><span style="font-style: italic">binary expression</span>, written <code class="highlight-inline"><span class="nx">EXPR_lhs</span> <span class="nx">BINOP</span> <span class="nx">EXPR_rhs</span></code>, where <code class="highlight-inline"><span class="nx">EXPR_lhs</span></code> and <code class="highlight-inline"><span class="nx">EXPR_rhs</span></code> are <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expressions</span></a> and <code class="highlight-inline"><span class="nx">BINOP</span></code> is one of the <a name="(tech._binary._operator)"></a><span style="font-style: italic">binary operator</span>s: <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&amp;&amp; || + - * / % | &amp; ^ &lt;&lt; &gt;&gt; == != === !== &gt; &gt;= &lt;= &lt;</span><span class="hspace"></span></span>. The operators <code class="highlight-inline"><span class="o">==</span></code> and <code class="highlight-inline"><span class="o">!=</span></code> operate on numbers, while the operators <code class="highlight-inline"><span class="o">===</span></code> and <code class="highlight-inline"><span class="o">!==</span></code> operate on byte strings. Numeric operations, like <code class="highlight-inline"><span class="o">+</span></code> and <code class="highlight-inline"><span class="o">&gt;</span></code>, only operate on numbers. Since all numbers in Reach are integers, operations like <code class="highlight-inline"><span class="err">/</span></code> truncate their result. Boolean operations, like <code class="highlight-inline"><span class="o">&amp;&amp;</span></code>, only operate on booleans. It is <a href="#%28tech._invalid%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> to use binary operations on the wrong types of <a href="ref-model.html#%28tech._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">values</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">)</span> <span class="o">-</span> <span class="nx">c</span> 
</pre></div>
</div></p><p>An <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> may be parenthesized, as in <code class="highlight-inline"><span class="p">(</span><span class="nx">EXPR</span><span class="p">)</span></code>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="p">]</span>
<span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">5</span> <span class="p">]</span> 
</pre></div>
</div></p><p>A <a name="(tech._tuple)"></a><span style="font-style: italic">tuple</span> literal, written <code class="highlight-inline"><span class="p">[</span> <span class="nx">EXPR_0</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">EXPR_n</span> <span class="p">]</span></code>, is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> which evaluates to a tuple of <code class="highlight-inline"><span class="nx">n</span></code> values, where <code class="highlight-inline"><span class="nx">EXPR_0</span></code> through <code class="highlight-inline"><span class="nx">EXPR_n</span></code> are <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expressions</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nx">arr</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> 
</pre></div>
</div></p><p>A <a name="(tech._reference)"></a><span style="font-style: italic">reference</span>, written <code class="highlight-inline"><span class="nx">REF_EXPR</span><span class="p">[</span><span class="nx">IDX_EXPR</span><span class="p">]</span></code>,
where <code class="highlight-inline"><span class="nx">REF_EXPR</span></code> is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> that evaluates to an <a href="#%28tech._array%29" class="techoutside" data-pltdoc="x"><span class="techinside">array</span></a> or a <a href="#%28tech._tuple%29" class="techoutside" data-pltdoc="x"><span class="techinside">tuple</span></a>
and <code class="highlight-inline"><span class="nx">IDX_EXPR</span></code> is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> that evaluates to a natural number which is less than the size of the array,
selects the element at the given index of the array.
Indices start at zero.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="p">}</span>
<span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;yo-yo&quot;</span><span class="o">:</span> <span class="mi">4</span> <span class="p">}</span>
</pre></div>
</div></p><p>An <a name="(tech._object._literal)"></a><span style="font-style: italic">object literal</span>,
typically written <code class="highlight-inline"><span class="p">{</span> <span class="nx">KEY_0</span><span class="o">:</span> <span class="nx">EXPR_0</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">KEY_n</span><span class="o">:</span> <span class="nx">EXPR_n</span> <span class="p">}</span></code>,
where <code class="highlight-inline"><span class="nx">KEY_0</span></code> through <code class="highlight-inline"><span class="nx">KEY_n</span></code> are <a href="#%28tech._identifier%29" class="techoutside" data-pltdoc="x"><span class="techinside">identifiers</span></a> or <a href="#%28tech._string._literal%29" class="techoutside" data-pltdoc="x"><span class="techinside">string literal</span></a>s
and <code class="highlight-inline"><span class="nx">EXPR_0</span></code> through <code class="highlight-inline"><span class="nx">EXPR_n</span></code> are <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expressions</span></a>,
is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> which evaluates to an object
with fields <code class="highlight-inline"><span class="nx">KEY_0</span></code> through <code class="highlight-inline"><span class="nx">KEY_n</span></code>.</p><p>Additional object literal syntax exists for convenience, such as:</p><p><div class="highlight"><pre><span></span><span class="p">{</span> <span class="p">...</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">z</span><span class="o">:</span> <span class="mi">5</span> <span class="p">}</span>
</pre></div>
</p><p>An <a name="(tech._object._splice)"></a><span style="font-style: italic">object splice</span>,
where all fields from <code class="highlight-inline"><span class="nx">obj</span></code> are copied into the object;
these fields may be accompanied by additional fields specified afterwards.</p><p><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">z</span><span class="o">:</span> <span class="mi">5</span> <span class="p">}</span>
</pre></div>
</p><p>Shorthand for <code class="highlight-inline"><span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">z</span><span class="o">:</span> <span class="mi">5</span><span class="p">}</span></code>, where <code class="highlight-inline"><span class="nx">x</span></code> is any <a href="#%28tech._bound._identifier%29" class="techoutside" data-pltdoc="x"><span class="techinside">bound identifier</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nx">obj</span><span class="p">.</span><span class="nx">x</span>
</pre></div>
</div></p><p>An <a name="(tech._object._reference)"></a><span style="font-style: italic">object reference</span>,
written <code class="highlight-inline"><span class="nx">OBJ</span><span class="p">.</span><span class="nx">FIELD</span></code>,
where <code class="highlight-inline"><span class="nx">OBJ</span></code> is an expression of type object,
and <code class="highlight-inline"><span class="nx">FIELD</span></code> is a <a href="#%28tech._valid%29" class="techoutside" data-pltdoc="x"><span class="techinside">valid</span></a> <a href="#%28tech._identifier%29" class="techoutside" data-pltdoc="x"><span class="techinside">identifier</span></a>,
accesses the FIELD field of object OBJ.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nx">choosesFirst</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">heap1</span> <span class="o">-</span> <span class="nx">amount</span><span class="p">,</span> <span class="nx">heap2</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[</span> <span class="nx">heap1</span><span class="p">,</span> <span class="nx">heap2</span> <span class="o">-</span> <span class="nx">amount</span> <span class="p">]</span> 
</pre></div>
</div></p><p>A <a name="(tech._conditional._expression)"></a><span style="font-style: italic">conditional expression</span>, written <code class="highlight-inline"><span class="nx">COND_E</span> <span class="o">?</span> <span class="nx">TRUE_E</span> <span class="o">:</span> <span class="nx">FALSE_E</span></code>, where <code class="highlight-inline"><span class="nx">COND_E</span></code>, <code class="highlight-inline"><span class="nx">TRUE_E</span></code>, and <code class="highlight-inline"><span class="nx">FALSE_E</span></code> are <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expressions</span></a>, selects between the <a href="ref-model.html#%28tech._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">values</span></a> which <code class="highlight-inline"><span class="nx">TRUE_E</span></code> and <code class="highlight-inline"><span class="nx">FALSE_E</span></code> evaluate to based on whether <code class="highlight-inline"><span class="nx">COND_E</span></code> evaluates to <code class="highlight-inline"><span class="kc">true</span></code>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">((</span><span class="nx">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">((</span><span class="nx">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="kd">const</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
          <span class="k">return</span> <span class="nx">y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="p">})</span> 
</pre></div>
</div></p><p>An <a name="(tech._arrow._expression)"></a><span style="font-style: italic">arrow expression</span>, written <code class="highlight-inline"><span class="p">(</span><span class="nx">ID_0</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">ID_n</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">EXPR</span></code>, where <code class="highlight-inline"><span class="nx">ID_0</span></code> through <code class="highlight-inline"><span class="nx">ID_n</span></code> are identifiers and <code class="highlight-inline"><span class="nx">EXPR</span></code> is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a>, evaluates to an function which is an abstraction of <code class="highlight-inline"><span class="nx">EXPR</span></code> over <code class="highlight-inline"><span class="nx">n</span></code> values.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="k">transfer</span><span class="p">(</span><span class="mi">10</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">Alice</span><span class="p">)</span> 
</pre></div>
</div></p><p>A <a name="(tech._transfer._expression)"></a><span style="font-style: italic">transfer expression</span>, written <code class="highlight-inline"><span class="k">transfer</span><span class="p">(</span><span class="nx">AMOUNT_EXPR</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">PART</span><span class="p">)</span></code>, where <code class="highlight-inline"><span class="nx">AMOUNT_EXPR</span></code> is an <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expression</span></a> that evaluates to a natural number and <code class="highlight-inline"><span class="nx">PART</span></code> is a <a href="ref-model.html#%28tech._participant%29" class="techoutside" data-pltdoc="x"><span class="techinside">participant</span></a> identifier, performs a <a href="ref-model.html#%28tech._transfer%29" class="techoutside" data-pltdoc="x"><span class="techinside">transfer</span></a> of <a href="ref-model.html#%28tech._network._token%29" class="techoutside" data-pltdoc="x"><span class="techinside">network tokens</span></a> from the <a href="ref-model.html#%28tech._contract%29" class="techoutside" data-pltdoc="x"><span class="techinside">contract</span></a> to the named <a href="ref-model.html#%28tech._participant%29" class="techoutside" data-pltdoc="x"><span class="techinside">participant</span></a>. <code class="highlight-inline"><span class="nx">AMOUNT_EXPR</span></code> must evaluate to less than or equal to the balance of <a href="ref-model.html#%28tech._network._token%29" class="techoutside" data-pltdoc="x"><span class="techinside">network tokens</span></a> in the <a href="ref-model.html#%28tech._contract%29" class="techoutside" data-pltdoc="x"><span class="techinside">contract</span></a> <a href="ref-model.html#%28tech._account%29" class="techoutside" data-pltdoc="x"><span class="techinside">account</span></a>. A <a href="#%28tech._transfer._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">transfer expression</span></a> may only occur within a <a href="ref-model.html#%28tech._consensus._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus step</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="k">interact</span><span class="p">.</span><span class="nx">amount</span>
<span class="k">interact</span><span class="p">.</span><span class="nx">notify</span><span class="p">(</span><span class="nx">handA</span><span class="p">,</span> <span class="nx">handB</span><span class="p">)</span>
<span class="k">interact</span><span class="p">.</span><span class="nx">chooseAmount</span><span class="p">(</span><span class="nx">heap1</span><span class="p">,</span> <span class="nx">heap2</span><span class="p">)</span> 
</pre></div>
</div></p><p>An <a name="(tech._interaction._expression)"></a><span style="font-style: italic">interaction expression</span>, written <code class="highlight-inline"><span class="k">interact</span><span class="p">.</span><span class="nx">METHOD</span><span class="p">(</span><span class="nx">EXPR_0</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">EXPR_n</span><span class="p">)</span></code>, where <code class="highlight-inline"><span class="nx">METHOD</span></code> is an identifier bound in the <a href="#%28tech._participant._interact._interface%29" class="techoutside" data-pltdoc="x"><span class="techinside">participant interact interface</span></a> to a function type, and <code class="highlight-inline"><span class="nx">EXPR_0</span></code> through <code class="highlight-inline"><span class="nx">EXPR_n</span></code> are <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expressions</span></a> that evaluates to the result of an <a href="ref-model.html#%28tech._interact%29" class="techoutside" data-pltdoc="x"><span class="techinside">interact</span></a>ion with a <a href="ref-model.html#%28tech._frontend%29" class="techoutside" data-pltdoc="x"><span class="techinside">frontend</span></a> that receives the evaluation of the <code class="highlight-inline"><span class="nx">n</span></code> <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expressions</span></a> and sends a <a href="ref-model.html#%28tech._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">value</span></a>.</p><p>An <a href="#%28tech._interaction._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">interaction expression</span></a> may also be written <code class="highlight-inline"><span class="k">interact</span><span class="p">.</span><span class="nx">KEY</span></code>, where <code class="highlight-inline"><span class="nx">KEY</span></code> is bound in the <a href="#%28tech._participant._interact._interface%29" class="techoutside" data-pltdoc="x"><span class="techinside">participant interact interface</span></a> to a non-function type.</p><p>An <a href="#%28tech._interaction._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">interaction expression</span></a> may only occur in a <a href="ref-model.html#%28tech._local._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">local step</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="k">assert</span><span class="p">(</span> <span class="nx">amount</span> <span class="o">&lt;=</span> <span class="nx">heap1</span> <span class="p">)</span>
<span class="nx">step</span><span class="p">(</span> <span class="nx">moveA</span> <span class="p">)</span>
<span class="nb">digest</span><span class="p">(</span> <span class="nx">coinFlip</span> <span class="p">)</span>
<span class="k">interact</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span>
<span class="k">declassify</span><span class="p">(</span> <span class="nx">_coinFlip</span> <span class="p">)</span> 
</pre></div>
</div></p><p>A <a name="(tech._function._application)"></a><span style="font-style: italic">function application</span>, written <code class="highlight-inline"><span class="nx">EXPR_rator</span><span class="p">(</span><span class="nx">EXPR_rand_0</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">EXPR_rand_n</span><span class="p">)</span></code>, where <code class="highlight-inline"><span class="nx">EXPR_rator</span></code> and <code class="highlight-inline"><span class="nx">EXPR_rand_0</span></code> through <code class="highlight-inline"><span class="nx">EXPR_rand_n</span></code> are <a href="#%28tech._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">expressions</span></a> that evaluate to one value. <code class="highlight-inline"><span class="nx">EXPR_rator</span></code> must evaluate to an abstraction over <code class="highlight-inline"><span class="nx">n</span></code> values or a primitive of arity <code class="highlight-inline"><span class="nx">n</span></code>.</p><h5>5.4.12<tt>&nbsp;</tt><a name="(part._.Standard_.Library)"></a>Standard Library</h5><p>Reach&rsquo;s <a name="(tech._standard._library)"></a><span style="font-style: italic">standard library</span> is a set of <a href="#%28tech._bound._identifier%29" class="techoutside" data-pltdoc="x"><span class="techinside">bound identifier</span></a>s and <a href="#%28tech._operator%29" class="techoutside" data-pltdoc="x"><span class="techinside">operators</span></a> which are implicitly bound in all <a href="#%28tech._module%29" class="techoutside" data-pltdoc="x"><span class="techinside">modules</span></a>.
It is sometimes treated as a <a href="#%28tech._module%29" class="techoutside" data-pltdoc="x"><span class="techinside">module</span></a> referred to as <span class="RktInBG"><span class="hspace"></span><span class="RktIn">"STDLIB"</span><span class="hspace"></span></span>.
All <a href="#%28tech._standard._library%29" class="techoutside" data-pltdoc="x"><span class="techinside">standard library</span></a> <a href="#%28tech._bound._identifier%29" class="techoutside" data-pltdoc="x"><span class="techinside">bound identifier</span></a>s and <a href="#%28tech._operator%29" class="techoutside" data-pltdoc="x"><span class="techinside">operators</span></a> are documented in this section.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="nb">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span> 
</pre></div>
</div></p><p><a name="(idx._(gentag._0))"></a> Converts a <a href="#%28tech._tuple%29" class="techoutside" data-pltdoc="x"><span class="techinside">tuple</span></a> of homogenueous values into an <a name="(tech._array)"></a><span style="font-style: italic">array</span>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nb">array_set</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="nx">idx</span><span class="p">,</span> <span class="nx">val</span><span class="p">);</span> 
</pre></div>
</div></p><p><a name="(idx._(gentag._1))"></a> Returns a new array identical to <code class="highlight-inline"><span class="nx">arr</span></code>, except that index <code class="highlight-inline"><span class="nx">idx</span></code> is replaced with <code class="highlight-inline"><span class="nx">val</span></code>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nx">tuple_set</span><span class="p">(</span><span class="nx">tup</span><span class="p">,</span> <span class="nx">idx</span><span class="p">,</span> <span class="nx">val</span><span class="p">);</span>
</pre></div>
</div></p><p><a name="(idx._(gentag._2))"></a> Returns a new tuple identical to <code class="highlight-inline"><span class="nx">tup</span></code>,
except that index <code class="highlight-inline"><span class="nx">idx</span></code> is replaced with <code class="highlight-inline"><span class="nx">val</span></code>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nx">object_set</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">fld</span><span class="p">,</span> <span class="nx">val</span><span class="p">);</span>
</pre></div>
</div></p><p><a name="(idx._(gentag._3))"></a> Returns a new object identical to <code class="highlight-inline"><span class="nx">obj</span></code>,
except that field <code class="highlight-inline"><span class="nx">fld</span></code> is replaced with <code class="highlight-inline"><span class="nx">val</span></code>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="p">[</span> <span class="nx">isHand</span><span class="p">,</span> <span class="nx">ROCK</span><span class="p">,</span> <span class="nx">PAPER</span><span class="p">,</span> <span class="nx">SCISSORS</span> <span class="p">]</span> <span class="o">=</span> <span class="nb">makeEnum</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> 
</pre></div>
</div></p><p>An <a name="(tech._enumeration)"></a><span style="font-style: italic">enumeration</span> (or <a name="(tech._enum)"></a><span style="font-style: italic">enum</span>, for short),
can be created with <code class="highlight-inline"><span class="nb">makeEnum</span><span class="p">(</span><span class="nx">N</span><span class="p">)</span></code>,
where <code class="highlight-inline"><span class="nx">N</span></code> is the number of distinct values in the enum.
This produces a tuple of <code class="highlight-inline"><span class="nx">N</span><span class="o">+</span><span class="mi">1</span></code> values,
where the first value is a <code class="highlight-inline"><span class="nb">Fun</span><span class="p">([</span><span class="nb">UInt256</span><span class="p">],</span> <span class="nb">Bool</span><span class="p">)</span></code>
which tells you if its argument is one of the enum&rsquo;s values,
and the next N values are distinct <code class="highlight-inline"><span class="nb">UInt256</span></code>s.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="k">assert</span><span class="p">(</span> <span class="nx">claim</span> <span class="p">)</span> 
</pre></div>
</div></p><p><div class="SIntrapara"><a name="(idx._(gentag._4))"></a> A <a href="ref-model.html#%28tech._static._assertion%29" class="techoutside" data-pltdoc="x"><span class="techinside">static assertion</span></a> which is only <a href="#%28tech._valid%29" class="techoutside" data-pltdoc="x"><span class="techinside">valid</span></a> if <code class="highlight-inline"><span class="nx">claim</span></code> always evaluates to <code class="highlight-inline"><span class="kc">true</span></code>.
</div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>The Reach compiler will produce a counter-example (i.e. an assignment of the identifiers in the program to falsify the <code class="highlight-inline"><span class="nx">claim</span></code>) when an <a href="#%28tech._invalid%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> <code class="highlight-inline"><span class="nx">claim</span></code> is provided.
It is possible to write a <code class="highlight-inline"><span class="nx">claim</span></code> that actually always evaluates to <code class="highlight-inline"><span class="kc">true</span></code>, but for which our current approach cannot prove always evaluates to <code class="highlight-inline"><span class="kc">true</span></code>; if this is the case, Reach will fail to compile the program, reporting that its analysis is incomplete.
Reach will never produce an erroneous counter-example.</p></blockquote></blockquote></blockquote></div></p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>See <a href="guide-assert.html" data-pltdoc="x">the guide section on verification</a> to better understand how and what to verify in your program.</p></blockquote></blockquote></blockquote><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="k">unknowable</span><span class="p">(</span> <span class="nx">Notter</span><span class="p">,</span> <span class="nx">Knower</span><span class="p">(</span><span class="nx">var_0</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">var_N</span><span class="p">)</span> <span class="p">)</span> 
</pre></div>
</div></p><p><a name="(idx._(gentag._5))"></a> A <a href="ref-model.html#%28tech._knowledge._assertion%29" class="techoutside" data-pltdoc="x"><span class="techinside">knowledge assertion</span></a> that the <a href="ref-model.html#%28tech._participant%29" class="techoutside" data-pltdoc="x"><span class="techinside">participant</span></a> <code class="highlight-inline"><span class="nx">Notter</span></code> <span class="emph">does not</span> know the variables <code class="highlight-inline"><span class="nx">var_0</span></code> through <code class="highlight-inline"><span class="nx">var_N</span></code> which the <a href="ref-model.html#%28tech._participant%29" class="techoutside" data-pltdoc="x"><span class="techinside">participant</span></a> <code class="highlight-inline"><span class="nx">Knower</span></code> <span class="emph">does</span> know.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="k">forall</span><span class="p">(</span> <span class="nx">Type</span> <span class="p">)</span>
<span class="k">forall</span><span class="p">(</span> <span class="nx">Type</span><span class="p">,</span> <span class="p">(</span><span class="kd">var</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">BLOCK</span> <span class="p">)</span> 
</pre></div>
</div></p><p><a name="(idx._(gentag._6))"></a> The single argument version returns an abstract value of the given type.
It may only be referenced inside of <a href="ref-model.html#%28tech._assert%29" class="techoutside" data-pltdoc="x"><span class="techinside">assert</span></a>ions; any other reference is invalid.</p><p>The two argument version is an abbreviation of calling the second argument with the result of <code class="highlight-inline"><span class="k">forall</span><span class="p">(</span><span class="nx">Type</span><span class="p">)</span></code>.
This is convenient for writing general claims about expressions, such as</p><p><div class="highlight"><pre><span></span><span class="k">forall</span><span class="p">(</span><span class="nb">UInt256</span><span class="p">,</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="k">assert</span><span class="p">(</span><span class="nx">x</span> <span class="o">==</span> <span class="nx">x</span><span class="p">));</span> 
</pre></div>
</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="k">assume</span><span class="p">(</span> <span class="nx">claim</span> <span class="p">)</span> 
</pre></div>
</div></p><p><a name="(idx._(gentag._7))"></a> An <a href="ref-model.html#%28tech._assumption%29" class="techoutside" data-pltdoc="x"><span class="techinside">assumption</span></a> where <code class="highlight-inline"><span class="nx">claim</span></code> evaluates to <code class="highlight-inline"><span class="kc">true</span></code> with <a href="ref-model.html#%28tech._honest%29" class="techoutside" data-pltdoc="x"><span class="techinside">honest</span></a> <a href="ref-model.html#%28tech._frontend%29" class="techoutside" data-pltdoc="x"><span class="techinside">frontends</span></a>.
This may only appear in a <a href="ref-model.html#%28tech._local._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">local step</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="k">require</span><span class="p">(</span> <span class="nx">claim</span> <span class="p">)</span> 
</pre></div>
</div></p><p><a name="(idx._(gentag._8))"></a> An <a href="ref-model.html#%28tech._requirement%29" class="techoutside" data-pltdoc="x"><span class="techinside">requirement</span></a> where <code class="highlight-inline"><span class="nx">claim</span></code> evaluates to <code class="highlight-inline"><span class="kc">true</span></code> with <a href="ref-model.html#%28tech._honest%29" class="techoutside" data-pltdoc="x"><span class="techinside">honest</span></a> <a href="ref-model.html#%28tech._participant%29" class="techoutside" data-pltdoc="x"><span class="techinside">participants</span></a>.
This may only appear in a <a href="ref-model.html#%28tech._consensus._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus step</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="k">possible</span><span class="p">(</span> <span class="nx">claim</span> <span class="p">)</span> 
</pre></div>
</div></p><p><a name="(idx._(gentag._9))"></a> A <a href="ref-model.html#%28tech._possibility._assertion%29" class="techoutside" data-pltdoc="x"><span class="techinside">possibility assertion</span></a> which is only <a href="#%28tech._valid%29" class="techoutside" data-pltdoc="x"><span class="techinside">valid</span></a> if it is possible for <code class="highlight-inline"><span class="nx">claim</span></code> to evaluate to <code class="highlight-inline"><span class="kc">true</span></code> with <a href="ref-model.html#%28tech._honest%29" class="techoutside" data-pltdoc="x"><span class="techinside">honest</span></a> <a href="ref-model.html#%28tech._frontend%29" class="techoutside" data-pltdoc="x"><span class="techinside">frontends</span></a> and <a href="ref-model.html#%28tech._participant%29" class="techoutside" data-pltdoc="x"><span class="techinside">participants</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nb">digest</span><span class="p">(</span> <span class="nx">arg_0</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">arg_n</span> <span class="p">)</span> 
</pre></div>
</div></p><p>The <a href="ref-model.html#%28tech._digest%29" class="techoutside" data-pltdoc="x"><span class="techinside">digest</span></a> primitive performs a <a href="https://en.wikipedia.org/wiki/Cryptographic_hash_function">cryptographic hash</a> of the binary encoding of the given arguments, using the Keccak256 algorithm.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nb">balance</span><span class="p">()</span> 
</pre></div>
</div></p><p>The <a name="(tech._balance)"></a><span style="font-style: italic">balance</span> primitive returns the balance of the <a href="ref-model.html#%28tech._contract%29" class="techoutside" data-pltdoc="x"><span class="techinside">contract</span></a> <a href="ref-model.html#%28tech._account%29" class="techoutside" data-pltdoc="x"><span class="techinside">account</span></a> for the <a href="ref-model.html#%28tech._dapp%29" class="techoutside" data-pltdoc="x"><span class="techinside">DApp</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="k">declassify</span><span class="p">(</span> <span class="nx">arg</span> <span class="p">)</span> 
</pre></div>
</div></p><p>The <a name="(tech._declassify)"></a><span style="font-style: italic">declassify</span> primitive performs a <a href="ref-model.html#%28tech._declassification%29" class="techoutside" data-pltdoc="x"><span class="techinside">declassification</span></a> of the given argument.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nb">implies</span><span class="p">(</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="p">)</span> 
</pre></div>
</div></p><p><a name="(idx._(gentag._10))"></a> Returns <code class="highlight-inline"><span class="kc">true</span></code> if <code class="highlight-inline"><span class="nx">x</span></code> is <code class="highlight-inline"><span class="kc">false</span></code> or <code class="highlight-inline"><span class="nx">y</span></code> is <code class="highlight-inline"><span class="kc">true</span></code>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nb">ensure</span><span class="p">(</span> <span class="nx">pred</span><span class="p">,</span> <span class="nx">x</span> <span class="p">)</span> 
</pre></div>
</div></p><p><a name="(idx._(gentag._11))"></a> Makes a <a href="ref-model.html#%28tech._static._assertion%29" class="techoutside" data-pltdoc="x"><span class="techinside">static assertion</span></a> that <code class="highlight-inline"><span class="nx">pred</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span></code> is <code class="highlight-inline"><span class="kc">true</span></code> and returns <code class="highlight-inline"><span class="nx">x</span></code>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nb">hasRandom</span> 
</pre></div>
</div></p><p><a name="(idx._(gentag._12))"></a> A <a href="#%28tech._participant._interact._interface%29" class="techoutside" data-pltdoc="x"><span class="techinside">participant interact interface</span></a> which specifies <span class="RktInBG"><span class="hspace"></span><span class="RktIn">random</span><span class="hspace"></span></span> as a function that takes no arguments are returns an unsigined integer of 256 bits.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nb">makeCommitment</span><span class="p">(</span> <span class="k">interact</span><span class="p">,</span> <span class="nx">x</span> <span class="p">)</span> 
</pre></div>
</div></p><p><a name="(idx._(gentag._13))"></a> Returns two values, <code class="highlight-inline"><span class="p">[</span> <span class="nx">commitment</span><span class="p">,</span> <span class="nx">salt</span> <span class="p">]</span></code>, where <code class="highlight-inline"><span class="nx">salt</span></code> is the result of calling <code class="highlight-inline"><span class="k">interact</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span></code>, and
<code class="highlight-inline"><span class="nx">commitment</span></code> is the <a href="ref-model.html#%28tech._digest%29" class="techoutside" data-pltdoc="x"><span class="techinside">digest</span></a> of <code class="highlight-inline"><span class="nx">salt</span></code> and <code class="highlight-inline"><span class="nx">x</span></code>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nb">checkCommitment</span><span class="p">(</span> <span class="nx">commitment</span><span class="p">,</span> <span class="nx">salt</span><span class="p">,</span> <span class="nx">x</span> <span class="p">)</span> 
</pre></div>
</div></p><p><a name="(idx._(gentag._14))"></a> Makes a <a href="ref-model.html#%28tech._requirement%29" class="techoutside" data-pltdoc="x"><span class="techinside">requirement</span></a> that <code class="highlight-inline"><span class="nx">commitment</span></code> is the <a href="ref-model.html#%28tech._digest%29" class="techoutside" data-pltdoc="x"><span class="techinside">digest</span></a> of <code class="highlight-inline"><span class="nx">salt</span></code> and <code class="highlight-inline"><span class="nx">x</span></code>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nb">closeTo</span><span class="p">(</span> <span class="nx">Who</span><span class="p">,</span> <span class="nx">after</span> <span class="p">)</span> 
</pre></div>
</div></p><p><a name="(idx._(gentag._15))"></a> Returns has <a href="ref-model.html#%28tech._participant%29" class="techoutside" data-pltdoc="x"><span class="techinside">participant</span></a> <code class="highlight-inline"><span class="nx">Who</span></code> make a <a href="ref-model.html#%28tech._publication%29" class="techoutside" data-pltdoc="x"><span class="techinside">publication</span></a>, then <a href="ref-model.html#%28tech._transfer%29" class="techoutside" data-pltdoc="x"><span class="techinside">transfer</span></a> the <code class="highlight-inline"><span class="nb">balance</span><span class="p">()</span></code> to <code class="highlight-inline"><span class="nx">Who</span></code> and end the <a href="ref-model.html#%28tech._dapp%29" class="techoutside" data-pltdoc="x"><span class="techinside">DApp</span></a> after executing the function <code class="highlight-inline"><span class="nx">after</span></code> in a <a href="ref-model.html#%28tech._step%29" class="techoutside" data-pltdoc="x"><span class="techinside">step</span></a>.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nb">and</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>  <span class="c1">// &amp;&amp;</span>
<span class="nb">or</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>   <span class="c1">// ||</span>
<span class="nb">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>  <span class="c1">// +</span>
<span class="nb">sub</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>  <span class="c1">// -</span>
<span class="nb">mul</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>  <span class="c1">// *</span>
<span class="nb">div</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>  <span class="c1">// /</span>
<span class="nb">mod</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>  <span class="c1">// %</span>
<span class="nb">lt</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>   <span class="c1">// &lt;</span>
<span class="nb">le</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>   <span class="c1">// &lt;=</span>
<span class="nb">ge</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>   <span class="c1">// &gt;=</span>
<span class="nb">gt</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>   <span class="c1">// &gt;</span>
<span class="nb">lsh</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>  <span class="c1">// &lt;&lt;</span>
<span class="nb">rsh</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>  <span class="c1">// &gt;&gt;</span>
<span class="nb">band</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="c1">// &amp;</span>
<span class="nb">bior</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="c1">// |</span>
<span class="nb">bxor</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="c1">// ^</span>
<span class="nb">eq</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>   <span class="c1">// ==, ===</span>
<span class="nb">neq</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>  <span class="c1">// !=, !==</span>
</pre></div>
</div></p><p>All <a href="#%28tech._binary._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">binary expression</span></a> operators have a corresponidng named function in the <a href="#%28tech._standard._library%29" class="techoutside" data-pltdoc="x"><span class="techinside">standard library</span></a>.
Note that while <code class="highlight-inline"><span class="o">&amp;&amp;</span></code> and <code class="highlight-inline"><span class="o">||</span></code> may not evaluate their second argument,
their corresponding named functions <code class="highlight-inline"><span class="nb">and</span></code> and <code class="highlight-inline"><span class="nb">or</span></code>, always do.</p><p><div class="highlight"><pre><span></span><span class="nb">poly_eq</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>  <span class="c1">// eq on Bool, Bytes, types, or UInt256</span>
<span class="nx">bool_eq</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>  <span class="c1">// eq on Bool</span>
<span class="nb">bytes_eq</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="c1">// eq on Bytes</span>
<span class="nb">type_eq</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>  <span class="c1">// eq on types</span>
<span class="nb">int_eq</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>   <span class="c1">// eq on UInt256</span>
</pre></div>
</p><p>Note that <code class="highlight-inline"><span class="o">==</span></code> is a function which operates on multiple types.
Both arguments must be of the same type.
Specialized functions exist for equality checking on each supported type.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nb">ite</span><span class="p">(</span><span class="nx">choosesFirst</span><span class="p">,</span> <span class="p">[</span><span class="nx">heap1</span> <span class="o">-</span> <span class="nx">amount</span><span class="p">,</span> <span class="nx">heap2</span><span class="p">],</span> <span class="p">[</span><span class="nx">heap1</span><span class="p">,</span> <span class="nx">heap2</span> <span class="o">-</span> <span class="nx">amount</span><span class="p">])</span>
</pre></div>
</div></p><p><a href="#%28tech._conditional._expression%29" class="techoutside" data-pltdoc="x"><span class="techinside">Conditional expression</span></a>s may also be written with the <code class="highlight-inline"><span class="nb">ite</span></code> function,
however, note that this function always evaluates both of its branches,
while the regular conditional expression only evaluates one branch.</p><p><div class="SIntrapara"><span style="font-weight: bold">&#8212;<wbr></wbr></span></div><div class="SIntrapara"><div class="highlight"><pre><span></span><span class="nb">typeOf</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>  <span class="c1">// type</span>
<span class="nb">is_type</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="c1">// Bool</span>
</pre></div>
</div></p><p>The <code class="highlight-inline"><span class="nb">typeOf</span></code> primitive function is the same as <code class="highlight-inline"><span class="k">typeof</span></code>:
it returns the type of its argument.
The <code class="highlight-inline"><span class="nb">is_type</span></code> function returns <code class="highlight-inline"><span class="kc">true</span></code> if its argument is a type.
Any expression satisfying <code class="highlight-inline"><span class="nb">is_type</span></code> is compiled away and does not exist at runtime.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="ref-model.html" title="backward to &quot;5.3 Language Model&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="ref.html" title="up to &quot;5 Reference&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ref-networks.html" title="forward to &quot;5.5 Consensus Network Connectors&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>