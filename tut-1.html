<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>2.2&nbsp;Step 1: Scaffolding and Setup</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="minted-solarizedlight-style.css" title="default"/><link rel="stylesheet" type="text/css" href="minted.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Reach:<span class="mywbr"> &nbsp;</span> The Safest and Easiest DApp Programming Language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="tut.html" class="tocviewselflink" data-pltdoc="x">Tutorial</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="guide.html" class="tocviewlink" data-pltdoc="x">Guide</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="howtos.html" class="tocviewlink" data-pltdoc="x">How-<wbr></wbr>tos</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="ref.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>2&nbsp;</td><td><a href="tut.html" class="tocviewlink" data-pltdoc="x">Tutorial</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="tut-0.html" class="tocviewlink" data-pltdoc="x">Step 0:<span class="mywbr"> &nbsp;</span> Install and Initialize</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Step 1:<span class="mywbr"> &nbsp;</span> Scaffolding and Setup</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="tut-2.html" class="tocviewlink" data-pltdoc="x">Step 2:<span class="mywbr"> &nbsp;</span> Rock, Paper, and Scissors</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="tut-3.html" class="tocviewlink" data-pltdoc="x">Step 3:<span class="mywbr"> &nbsp;</span> Bets and Wagers</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="tut-4.html" class="tocviewlink" data-pltdoc="x">Step 4:<span class="mywbr"> &nbsp;</span> Trust and Commitments</a></td></tr><tr><td align="right">2.6&nbsp;</td><td><a href="tut-5.html" class="tocviewlink" data-pltdoc="x">Step 5:<span class="mywbr"> &nbsp;</span> Timeouts and Participation</a></td></tr><tr><td align="right">2.7&nbsp;</td><td><a href="tut-6.html" class="tocviewlink" data-pltdoc="x">Step 6:<span class="mywbr"> &nbsp;</span> Play and Play Again</a></td></tr><tr><td align="right">2.8&nbsp;</td><td><a href="tut-7.html" class="tocviewlink" data-pltdoc="x">Step 7:<span class="mywbr"> &nbsp;</span> Interaction and Independence</a></td></tr><tr><td align="right">2.9&nbsp;</td><td><a href="tut-8.html" class="tocviewlink" data-pltdoc="x">Step 8:<span class="mywbr"> &nbsp;</span> Onward and Further</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="tut-0.html" title="backward to &quot;2.1 Step 0: Install and Initialize&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="tut.html" title="up to &quot;2 Tutorial&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="tut-2.html" title="forward to &quot;2.3 Step 2: Rock, Paper, and Scissors&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>2.2<tt>&nbsp;</tt><a name="(part._tut-1)"></a>Step 1: Scaffolding and Setup</h4><p>In this tutorial, we&rsquo;ll be building a version of <span class="emph">Rock, Paper, Scissors</span> where two players, <span class="emph">Alice</span> and <span class="emph">Bob</span>, can wager on the result of the game.
We&rsquo;ll start simple and slowly make the application more fully featured.</p><p>You should following along by copying each part of the program and seeing how things go.
If you&rsquo;re like us, you may find it beneficial to type each line out, rather than copying &amp; pasting so you can start building your muscle memory and begin to get a sense for each part of a Reach program.</p><p>Let&rsquo;s start by creating a file named <span class="stt">index.rsh</span> and fill it with this:</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/docs-src/x/tut-1/index.rsh"><span class="stt">tut-1/index.rsh</span></a></p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span> <span class="mi">1</span>    <span class="s1">&#39;reach 0.1&#39;</span><span class="p">;</span>
 <span class="mi">2</span>    
 <span class="mi">3</span>    <span class="kd">export</span> <span class="kd">const</span> <span class="nx">main</span> <span class="o">=</span>
 <span class="mi">4</span>      <span class="nb">Reach</span><span class="p">.</span><span class="nb">App</span><span class="p">(</span>
 <span class="mi">5</span>        <span class="p">{},</span>
 <span class="mi">6</span>        <span class="p">[[</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="p">{}],</span> <span class="p">[</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="p">{}]],</span>
 <span class="mi">7</span>        <span class="p">(</span><span class="nx">A</span><span class="p">,</span> <span class="nx">B</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
 <span class="mi">8</span>          <span class="k">exit</span><span class="p">();</span> <span class="p">});</span>
</pre></div>
</div></p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Did you notice that <a href="https://github.com/reach-sh/reach-lang/blob/master/docs-src/x/tut-1/index.rsh"><span class="stt">tut-1/index.rsh</span></a> was a link in the box above the code sample?
You can always click on these links to see the entire file in our <a href="https://github.com/reach-sh/reach-lang">GitHub</a> repository.</p></blockquote></blockquote></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Did your text editor recognize <span class="stt">index.rsh</span> as a Reach program and give you proper syntax hightlighting?
If not, then you can manually configure it to treat Reach (<span class="stt">.rsh</span>) files as JavaScript and things will be mostly correct.</p></blockquote></blockquote></blockquote><p>This is just a shell of a program that doesn&rsquo;t do much, but it has a few important components.</p><ul><li><p>Line 1 indicates that this is a Reach program.
You&rsquo;ll always have this at the top of every program.</p></li><li><p>Line 3 defines the main export from the program.
When you compile, this is what the compiler will look at.</p></li><li><p>Line 6 specifies the two participants to this application, <span class="emph">Alice</span> and <span class="emph">Bob</span>.</p></li><li><p>Line 7 binds Reach identifiers (<code class="highlight-inline"><span class="nx">A</span></code> and <code class="highlight-inline"><span class="nx">B</span></code>) to these participants and defines the body of the program.</p></li></ul><p>Before we go too much further, let&rsquo;s create a similar shell for our JavaScript <a href="ref-model.html#%28tech._frontend%29" class="techoutside" data-pltdoc="x"><span class="techinside">frontend</span></a> code.
Open a new file named <span class="stt">index.mjs</span> and fill it with this:</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/docs-src/x/tut-1/index.mjs"><span class="stt">tut-1/index.mjs</span></a></p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span> <span class="mi">1</span>    <span class="kr">import</span> <span class="o">*</span> <span class="nx">as</span> <span class="nx">stdlib</span> <span class="nx">from</span> <span class="s1">&#39;@reach-sh/stdlib/ETH.mjs&#39;</span><span class="p">;</span>
 <span class="mi">2</span>    <span class="kr">import</span> <span class="o">*</span> <span class="nx">as</span> <span class="nx">backend</span> <span class="nx">from</span> <span class="s1">&#39;./build/index.main.mjs&#39;</span><span class="p">;</span>
 <span class="mi">3</span>    
 <span class="mi">4</span>    <span class="p">(</span> <span class="nx">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
 <span class="mi">5</span>      <span class="kr">const</span> <span class="nx">toNetworkFormat</span> <span class="o">=</span> <span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">stdlib</span><span class="p">.</span><span class="nx">toWeiBigNumber</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="s1">&#39;ether&#39;</span><span class="p">);</span>
 <span class="mi">6</span>    
 <span class="mi">7</span>      <span class="kr">const</span> <span class="nx">accAlice</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">stdlib</span><span class="p">.</span><span class="nx">newTestAccount</span><span class="p">(</span><span class="nx">toNetworkFormat</span><span class="p">(</span><span class="s1">&#39;10&#39;</span><span class="p">));</span>
 <span class="mi">8</span>      <span class="kr">const</span> <span class="nx">accBob</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">stdlib</span><span class="p">.</span><span class="nx">newTestAccount</span><span class="p">(</span><span class="nx">toNetworkFormat</span><span class="p">(</span><span class="s1">&#39;10&#39;</span><span class="p">));</span>
 <span class="mi">9</span>    
<span class="mi">10</span>      <span class="kr">const</span> <span class="nx">ctcAlice</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">accAlice</span><span class="p">.</span><span class="nx">deploy</span><span class="p">(</span><span class="nx">backend</span><span class="p">);</span>
<span class="mi">11</span>      <span class="kr">const</span> <span class="nx">ctcBob</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">accBob</span><span class="p">.</span><span class="nx">attach</span><span class="p">(</span><span class="nx">backend</span><span class="p">,</span> <span class="nx">ctcAlice</span><span class="p">);</span>
<span class="mi">12</span>    
<span class="mi">13</span>      <span class="nx">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
<span class="mi">14</span>        <span class="nx">backend</span><span class="p">.</span><span class="nx">Alice</span><span class="p">(</span>
<span class="mi">15</span>          <span class="nx">stdlib</span><span class="p">,</span> <span class="nx">ctcAlice</span><span class="p">,</span>
<span class="mi">16</span>          <span class="p">{}),</span>
<span class="mi">17</span>        <span class="nx">backend</span><span class="p">.</span><span class="nx">Bob</span><span class="p">(</span>
<span class="mi">18</span>          <span class="nx">stdlib</span><span class="p">,</span> <span class="nx">ctcBob</span><span class="p">,</span>
<span class="mi">19</span>          <span class="p">{})</span>
<span class="mi">20</span>      <span class="p">]);</span>
<span class="mi">21</span>    <span class="p">})();</span>
</pre></div>
</div></p><p>This JavaScript code is similarly schematic and will be consistent across all of your test programs.</p><ul><li><p>Line 1 imports the Reach standard library.
In this case, we choose Ethereum for simplicity.</p></li><li><p>Line 2 imports your backend, which <span class="stt">./reach compile</span> will produce.</p></li><li><p>Line 5 defines a helpful function for defining quantities in ETH.</p></li><li><p>Lines 7 and 8 create test accounts with initial endowments for Alice and Bob.
This will only work on the Reach-provided developer testing network.</p></li><li><p>Line 10 has Alice deploy the application.</p></li><li><p>Line 11 has Bob attach to it.</p></li><li><p>Lines 14 through 16 initialize Alice&rsquo;s backend.</p></li><li><p>Lines 17 through 19 initialize Bob&rsquo;s backend.</p></li><li><p>Line 13 waits for the backends to complete.</p></li></ul><p>This is now enough for Reach to compile and run our program. Let&rsquo;s try by running</p><p><span class="hspace">&nbsp;&nbsp;</span><span style="font-weight: bold"><span class="stt">$</span></span><span class="stt"> </span><span class="stt">./reach run</span></p><p>Reach should now build and launch a Docker container for this application.
Since the application doesn&rsquo;t do anything, you&rsquo;ll just see a lot of diagnostic messages though, so that&rsquo;s not very exciting.</p><p>In <a href="tut-2.html" data-pltdoc="x">the next step</a>, we&rsquo;ll implement the logic of <span class="emph">Rock, Paper, Scissors</span> and our application will start doing something!</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="tut-0.html" title="backward to &quot;2.1 Step 0: Install and Initialize&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="tut.html" title="up to &quot;2 Tutorial&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="tut-2.html" title="forward to &quot;2.3 Step 2: Rock, Paper, and Scissors&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>