<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-149147406-1"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-149147406-1');</script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script><script src="tooltips.js"></script><script src="reach-pre.js"></script><link rel="stylesheet" href="tooltips.css"><link rel="stylesheet" href="reach.css"><link rel="stylesheet" href="minted.css"><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>2.2&nbsp;Scaffolding and Setup</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Reach:<span class="mywbr"> &nbsp;</span> The Safest and Easiest DApp Programming Language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="tut.html" class="tocviewselflink" data-pltdoc="x">Tutorial</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="guide.html" class="tocviewlink" data-pltdoc="x">Guide</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="workshop.html" class="tocviewlink" data-pltdoc="x">Workshop</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="ref.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>2&nbsp;</td><td><a href="tut.html" class="tocviewlink" data-pltdoc="x">Tutorial</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="tut-0.html" class="tocviewlink" data-pltdoc="x">Install and Initialize</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Scaffolding and Setup</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="tut-2.html" class="tocviewlink" data-pltdoc="x">Rock, Paper, and Scissors</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="tut-3.html" class="tocviewlink" data-pltdoc="x">Bets and Wagers</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="tut-4.html" class="tocviewlink" data-pltdoc="x">Trust and Commitments</a></td></tr><tr><td align="right">2.6&nbsp;</td><td><a href="tut-5.html" class="tocviewlink" data-pltdoc="x">Timeouts and Participation</a></td></tr><tr><td align="right">2.7&nbsp;</td><td><a href="tut-6.html" class="tocviewlink" data-pltdoc="x">Play and Play Again</a></td></tr><tr><td align="right">2.8&nbsp;</td><td><a href="tut-7.html" class="tocviewlink" data-pltdoc="x">Interaction and Independence</a></td></tr><tr><td align="right">2.9&nbsp;</td><td><a href="tut-8.html" class="tocviewlink" data-pltdoc="x">Onward and Further</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="tut-0.html" title="backward to &quot;2.1 Install and Initialize&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="tut.html" title="up to &quot;2 Tutorial&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="tut-2.html" title="forward to &quot;2.3 Rock, Paper, and Scissors&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>2.2<tt>&nbsp;</tt><a name="(part._tut-1)"></a>Scaffolding and Setup</h4><p>In this tutorial, we&rsquo;ll be building a version of <span class="emph">Rock, Paper, Scissors</span> where two players, <span class="emph">Alice</span> and <span class="emph">Bob</span>, can wager on the result of the game.
We&rsquo;ll start simple and slowly make the application more fully-featured.</p><p>You should follow along by copying each part of the program and seeing how things go.
If you&rsquo;re like us, you may find it beneficial to type each line out, rather than copying &amp; pasting so you can start building your muscle memory and begin to get a sense for each part of a Reach program.</p><p>Let&rsquo;s start by creating a file named <span class="stt">index.rsh</span> and fill it with this:</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-1/index.rsh"><span class="stt">tut-1/index.rsh</span></a><button class="btn" data-clipboard-text="'reach 0.1';

export const main =
  Reach.App(
    {},
    [['Alice', {}], ['Bob', {}]],
    (A, B) =&gt; {
      exit(); });"><img class="clippy" width="13" src="clippy.svg" alt="Copy to clipboard"> </img></button>&nbsp;</p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span> <span class="mi">1</span>    <span class="s1">&#39;reach 0.1&#39;</span><span class="p">;</span>
 <span class="mi">2</span>    
 <span class="mi">3</span>    <a href="ref-programs-module.html#%28reach._%28%28export%29%29%29" class="kd" data-pltdoc="x">export</a> <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <font class="badlink"><span class="nx">main</span></font> <font class="badlink"><span class="o">=</span></font>
 <span class="mi">4</span>      <a href="ref-programs-module.html#%28reach._%28%28.Reach%29%29%29" class="nb" data-pltdoc="x">Reach</a><span class="p">.</span><a href="ref-programs-module.html#%28reach._%28%28.App%29%29%29" class="nb" data-pltdoc="x">App</a><span class="p">(</span>
 <span class="mi">5</span>        <span class="p">{},</span>
 <span class="mi">6</span>        <span class="p">[[</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="p">{}],</span> <span class="p">[</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="p">{}]],</span>
 <span class="mi">7</span>        <span class="p">(</span><font class="badlink"><span class="nx">A</span></font><span class="p">,</span> <font class="badlink"><span class="nx">B</span></font><span class="p">)</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <span class="p">{</span>
 <span class="mi">8</span>          <a href="ref-programs-step.html#%28reach._%28%28exit%29%29%29" class="k" data-pltdoc="x">exit</a><span class="p">();</span> <span class="p">});</span>
</pre></div></div></p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Did you notice that <code class="highlight"><a href="ref-programs-module.html#%28reach._%28%28export%29%29%29" class="kd" data-pltdoc="x">export</a></code>, <code class="highlight"><a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a></code>, <code class="highlight"><a href="ref-programs-step.html#%28reach._%28%28exit%29%29%29" class="k" data-pltdoc="x">exit</a></code>, and so on are links?
In Reach code samples, you can click on the names of keywords and standard library functions to be brought to their documentation.</p></blockquote></blockquote></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Did you notice that <a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-1/index.rsh"><span class="stt">tut-1/index.rsh</span></a> was a link in the box above the code sample?
You can always click on these links to see the entire file in our <a href="https://github.com/reach-sh/reach-lang">GitHub</a> repository.</p></blockquote></blockquote></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Did you notice the attractive clipboard icon on the top the right of that box?
You can click on it and the content of the code box will be copied onto your clipboard.</p></blockquote></blockquote></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Did your text editor recognize <span class="stt">index.rsh</span> as a Reach program and give you proper syntax hightlighting?
If not, then you can manually configure it to treat Reach (<span class="stt">.rsh</span>) files as JavaScript and things will be mostly correct.</p></blockquote></blockquote></blockquote><p>This is just a shell of a program that doesn&rsquo;t do much, but it has a few important components.</p><ul><li><p>Line 1 indicates that this is a Reach program.
You&rsquo;ll always have this at the top of every program.</p></li><li><p>Line 3 defines the main export from the program.
When you compile, this is what the compiler will look at.</p></li><li><p>Line 6 specifies the two participants to this application, <span class="emph">Alice</span> and <span class="emph">Bob</span>.</p></li><li><p>Line 7 binds Reach identifiers (<code class="highlight"><font class="badlink"><span class="nx">A</span></font></code> and <code class="highlight"><font class="badlink"><span class="nx">B</span></font></code>) to these participants and defines the body of the program.</p></li></ul><p>Before we go too much further, let&rsquo;s create a similar shell for our JavaScript <a href="ref-model.html#%28tech._frontend%29" class="techoutside" data-pltdoc="x"><span class="techinside">frontend</span></a> code.
Open a new file named <span class="stt">index.mjs</span> and fill it with this:</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-1/index.mjs"><span class="stt">tut-1/index.mjs</span></a><button class="btn" data-clipboard-text="import * as stdlib from '@reach-sh/stdlib/ETH.mjs';
import * as backend from './build/index.main.mjs';

( async () =&gt; {
  const toNetworkFormat = (n) =&gt; stdlib.toWeiBigNumber(n, 'ether');

  const accAlice = await stdlib.newTestAccount(toNetworkFormat('10'));
  const accBob = await stdlib.newTestAccount(toNetworkFormat('10'));

  const ctcAlice = await accAlice.deploy(backend);
  const ctcBob = await accBob.attach(backend, ctcAlice);

  await Promise.all([
    backend.Alice(
      stdlib, ctcAlice,
      {}),
    backend.Bob(
      stdlib, ctcBob,
      {})
  ]);
})(); // &lt;-- Don't forget these!"><img class="clippy" width="13" src="clippy.svg" alt="Copy to clipboard"> </img></button>&nbsp;</p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span> <span class="mi">1</span>    <font class="badlink"><span class="kr">import</span></font> <font class="badlink"><span class="o">*</span></font> <font class="badlink"><span class="nx">as</span></font> <a href="ref-backend-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a> <font class="badlink"><span class="nx">from</span></font> <span class="s1">&#39;@reach-sh/stdlib/ETH.mjs&#39;</span><span class="p">;</span>
 <span class="mi">2</span>    <font class="badlink"><span class="kr">import</span></font> <font class="badlink"><span class="o">*</span></font> <font class="badlink"><span class="nx">as</span></font> <a href="ref-backend-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a> <font class="badlink"><span class="nx">from</span></font> <span class="s1">&#39;./build/index.main.mjs&#39;</span><span class="p">;</span>
 <span class="mi">3</span>    
 <span class="mi">4</span>    <span class="p">(</span> <font class="badlink"><span class="nx">async</span></font> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
 <span class="mi">5</span>      <font class="badlink"><span class="kr">const</span></font> <font class="badlink"><span class="nx">toNetworkFormat</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">(</span><font class="badlink"><span class="nx">n</span></font><span class="p">)</span> <span class="p">=&gt;</span> <a href="ref-backend-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a><span class="p">.</span><a href="ref-backend-js.html#%28javascript._%28%28to.Wei.Big.Number%29%29%29" class="nx" data-pltdoc="x">toWeiBigNumber</a><span class="p">(</span><font class="badlink"><span class="nx">n</span></font><span class="p">,</span> <span class="s1">&#39;ether&#39;</span><span class="p">);</span>
 <span class="mi">6</span>    
 <span class="mi">7</span>      <font class="badlink"><span class="kr">const</span></font> <font class="badlink"><span class="nx">accAlice</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">await</span></font> <a href="ref-backend-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a><span class="p">.</span><a href="ref-backend-js.html#%28javascript._%28%28new.Test.Account%29%29%29" class="nx" data-pltdoc="x">newTestAccount</a><span class="p">(</span><font class="badlink"><span class="nx">toNetworkFormat</span></font><span class="p">(</span><span class="s1">&#39;10&#39;</span><span class="p">));</span>
 <span class="mi">8</span>      <font class="badlink"><span class="kr">const</span></font> <font class="badlink"><span class="nx">accBob</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">await</span></font> <a href="ref-backend-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a><span class="p">.</span><a href="ref-backend-js.html#%28javascript._%28%28new.Test.Account%29%29%29" class="nx" data-pltdoc="x">newTestAccount</a><span class="p">(</span><font class="badlink"><span class="nx">toNetworkFormat</span></font><span class="p">(</span><span class="s1">&#39;10&#39;</span><span class="p">));</span>
 <span class="mi">9</span>    
<span class="mi">10</span>      <font class="badlink"><span class="kr">const</span></font> <font class="badlink"><span class="nx">ctcAlice</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">await</span></font> <font class="badlink"><span class="nx">accAlice</span></font><span class="p">.</span><a href="ref-backend-js.html#%28javascript._%28%28deploy%29%29%29" class="nx" data-pltdoc="x">deploy</a><span class="p">(</span><a href="ref-backend-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a><span class="p">);</span>
<span class="mi">11</span>      <font class="badlink"><span class="kr">const</span></font> <font class="badlink"><span class="nx">ctcBob</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">await</span></font> <font class="badlink"><span class="nx">accBob</span></font><span class="p">.</span><a href="ref-backend-js.html#%28javascript._%28%28attach%29%29%29" class="nx" data-pltdoc="x">attach</a><span class="p">(</span><a href="ref-backend-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a><span class="p">,</span> <font class="badlink"><span class="nx">ctcAlice</span></font><span class="p">);</span>
<span class="mi">12</span>    
<span class="mi">13</span>      <font class="badlink"><span class="nx">await</span></font> <font class="badlink"><span class="nb">Promise</span></font><span class="p">.</span><font class="badlink"><span class="nx">all</span></font><span class="p">([</span>
<span class="mi">14</span>        <a href="ref-backend-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a><span class="p">.</span><font class="badlink"><span class="nx">Alice</span></font><span class="p">(</span>
<span class="mi">15</span>          <a href="ref-backend-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a><span class="p">,</span> <font class="badlink"><span class="nx">ctcAlice</span></font><span class="p">,</span>
<span class="mi">16</span>          <span class="p">{}),</span>
<span class="mi">17</span>        <a href="ref-backend-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a><span class="p">.</span><font class="badlink"><span class="nx">Bob</span></font><span class="p">(</span>
<span class="mi">18</span>          <a href="ref-backend-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a><span class="p">,</span> <font class="badlink"><span class="nx">ctcBob</span></font><span class="p">,</span>
<span class="mi">19</span>          <span class="p">{})</span>
<span class="mi">20</span>      <span class="p">]);</span>
<span class="mi">21</span>    <span class="p">})();</span> <span class="c1">// &lt;-- Don&#39;t forget these!</span>
</pre></div></div></p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Did you notice that <code class="highlight"><a href="ref-backend-js.html#%28javascript._%28%28to.Wei.Big.Number%29%29%29" class="nx" data-pltdoc="x">toWeiBigNumber</a></code>, <code class="highlight"><a href="ref-backend-js.html#%28javascript._%28%28new.Test.Account%29%29%29" class="nx" data-pltdoc="x">newTestAccount</a></code>, <code class="highlight"><a href="ref-backend-js.html#%28javascript._%28%28deploy%29%29%29" class="nx" data-pltdoc="x">deploy</a></code>, and so on are links?
In JavaScript code samples, you can click on the names of standard library functions to be brought to their documentation.</p></blockquote></blockquote></blockquote><p>This JavaScript code is similarly schematic and will be consistent across all of your test programs.</p><ul><li><p>Line 1 imports the Reach standard library.
In this case, we choose Ethereum for simplicity.</p></li><li><p>Line 2 imports your backend, which <span class="stt">./reach compile</span> will produce.</p></li><li><p>Line 4 defines an asynchronous function that will be the body of our frontend.</p></li><li><p>Line 5 defines a helpful function for defining quantities in ETH.</p></li><li><p>Lines 7 and 8 create test accounts with initial endowments for Alice and Bob.
This will only work on the Reach-provided developer testing network.</p></li><li><p>Line 10 has Alice deploy the application.</p></li><li><p>Line 11 has Bob attach to it.</p></li><li><p>Lines 14 through 16 initialize Alice&rsquo;s backend.</p></li><li><p>Lines 17 through 19 initialize Bob&rsquo;s backend.</p></li><li><p>Line 13 waits for the backends to complete.</p></li><li><p>Line 21 calls this asynchronous function that we&rsquo;ve defined.</p></li></ul><p>This is now enough for Reach to compile and run our program. Let&rsquo;s try by running</p><p><span class="hspace">&nbsp;&nbsp;</span><span style="font-weight: bold"><span class="stt">$</span></span><span class="stt"> </span><span class="stt">./reach run</span></p><p>Reach should now build and launch a Docker container for this application.
Since the application doesn&rsquo;t do anything, you&rsquo;ll just see a lot of diagnostic messages though, so that&rsquo;s not very exciting.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><div class="SIntrapara">The entire process that we just went through can be automated by running </div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span style="font-weight: bold"><span class="stt">$</span></span><span class="stt"> </span><span class="stt">./reach init</span></div><div class="SIntrapara"> when you start your next project!</div></p></blockquote></blockquote></blockquote><p>In <a href="tut-2.html" data-pltdoc="x">the next step</a>, we&rsquo;ll implement the logic of <span class="emph">Rock, Paper, Scissors</span> and our application will start doing something!</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="tut-0.html" title="backward to &quot;2.1 Install and Initialize&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="tut.html" title="up to &quot;2 Tutorial&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="tut-2.html" title="forward to &quot;2.3 Rock, Paper, and Scissors&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div><script src="reach-post.js"></script></body></html>